<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='一、Golang面向对象编程概念 Golang没有沿袭其他传统编程语言面向对象的概念：没有封装、继承、多态这些概念，但可以通过别的方式来实现这些特性：
封装：通过方法实现 继承：通过匿名字段实现 多态：通过接口实现 二、匿名字段 2.1 匿名字段的概念 一般情况下，定义结构体的时候是字段名与其类型一一对应，实际上Golang支持只提供类型而不写字段名的方式，这就是匿名字段。 匿名字段的简单体验： 当匿名字段也是一个结构体s1且存在于另一个结构体s2的时候，那么s1结构体的全部字段都会被隐式地引入到结构体s2。此时，匿名字段也可以被称为嵌入字段，实现了&amp;quot;继承&amp;quot;的思想。 例如：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //人 type Person struct { name string sex byte age int } //学生 type Student struct { Person //匿名字段，只有Person类型而没有名字，那么Student默认就包含了Person的所有字段 //学生额外的字段 stuNo int //学号 address string } Student中的Person，Person只是个类型而没有给它起名称，所以Person就是匿名字段！Student中的Person会把Person类型中的字段全部引用过来。
2.2 匿名字段初始化 2.2.1 顺序初始化 对应结构体中的字段，一个个给值。 示例：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 //人 type Person struct { name string sex byte //最终以ASCII码值的方式打印 age int } //学生 type Student struct { Person //结构体匿名字段，Student默认就包含了Person的所有字段 stuNo int //学号 address string } func main() { var s1 = Student{ Person: Person{&amp;#34;go&amp;#34;, &amp;#39;M&amp;#39;, 11}, //Person本身也是一个结构体，对结构体匿名字段进行初始化需要这样写 stuNo: 0, address: &amp;#34;Google Inc.'>
<title>Golang学习之面向对象编程</title>

<link rel='canonical' href='https://360rce.github.io/p/giabprkd/'>

<link rel="stylesheet" href="/scss/style.min.efe1e773d779dbe0d478a3345bc5ad949fed81363c53bfa8984135f20bf7841d.css"><meta property='og:title' content='Golang学习之面向对象编程'>
<meta property='og:description' content='一、Golang面向对象编程概念 Golang没有沿袭其他传统编程语言面向对象的概念：没有封装、继承、多态这些概念，但可以通过别的方式来实现这些特性：
封装：通过方法实现 继承：通过匿名字段实现 多态：通过接口实现 二、匿名字段 2.1 匿名字段的概念 一般情况下，定义结构体的时候是字段名与其类型一一对应，实际上Golang支持只提供类型而不写字段名的方式，这就是匿名字段。 匿名字段的简单体验： 当匿名字段也是一个结构体s1且存在于另一个结构体s2的时候，那么s1结构体的全部字段都会被隐式地引入到结构体s2。此时，匿名字段也可以被称为嵌入字段，实现了&amp;quot;继承&amp;quot;的思想。 例如：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //人 type Person struct { name string sex byte age int } //学生 type Student struct { Person //匿名字段，只有Person类型而没有名字，那么Student默认就包含了Person的所有字段 //学生额外的字段 stuNo int //学号 address string } Student中的Person，Person只是个类型而没有给它起名称，所以Person就是匿名字段！Student中的Person会把Person类型中的字段全部引用过来。
2.2 匿名字段初始化 2.2.1 顺序初始化 对应结构体中的字段，一个个给值。 示例：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 //人 type Person struct { name string sex byte //最终以ASCII码值的方式打印 age int } //学生 type Student struct { Person //结构体匿名字段，Student默认就包含了Person的所有字段 stuNo int //学号 address string } func main() { var s1 = Student{ Person: Person{&amp;#34;go&amp;#34;, &amp;#39;M&amp;#39;, 11}, //Person本身也是一个结构体，对结构体匿名字段进行初始化需要这样写 stuNo: 0, address: &amp;#34;Google Inc.'>
<meta property='og:url' content='https://360rce.github.io/p/giabprkd/'>
<meta property='og:site_name' content='iceH&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Golang' /><meta property='article:published_time' content='2021-01-08T20:53:56&#43;00:00'/><meta property='article:modified_time' content='2021-01-08T20:53:56&#43;00:00'/><meta property='og:image' content='https://w.wallhaven.cc/full/zy/wallhaven-zydldy.jpg' />
<meta name="twitter:title" content="Golang学习之面向对象编程">
<meta name="twitter:description" content="一、Golang面向对象编程概念 Golang没有沿袭其他传统编程语言面向对象的概念：没有封装、继承、多态这些概念，但可以通过别的方式来实现这些特性：
封装：通过方法实现 继承：通过匿名字段实现 多态：通过接口实现 二、匿名字段 2.1 匿名字段的概念 一般情况下，定义结构体的时候是字段名与其类型一一对应，实际上Golang支持只提供类型而不写字段名的方式，这就是匿名字段。 匿名字段的简单体验： 当匿名字段也是一个结构体s1且存在于另一个结构体s2的时候，那么s1结构体的全部字段都会被隐式地引入到结构体s2。此时，匿名字段也可以被称为嵌入字段，实现了&amp;quot;继承&amp;quot;的思想。 例如：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //人 type Person struct { name string sex byte age int } //学生 type Student struct { Person //匿名字段，只有Person类型而没有名字，那么Student默认就包含了Person的所有字段 //学生额外的字段 stuNo int //学号 address string } Student中的Person，Person只是个类型而没有给它起名称，所以Person就是匿名字段！Student中的Person会把Person类型中的字段全部引用过来。
2.2 匿名字段初始化 2.2.1 顺序初始化 对应结构体中的字段，一个个给值。 示例：
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 //人 type Person struct { name string sex byte //最终以ASCII码值的方式打印 age int } //学生 type Student struct { Person //结构体匿名字段，Student默认就包含了Person的所有字段 stuNo int //学号 address string } func main() { var s1 = Student{ Person: Person{&amp;#34;go&amp;#34;, &amp;#39;M&amp;#39;, 11}, //Person本身也是一个结构体，对结构体匿名字段进行初始化需要这样写 stuNo: 0, address: &amp;#34;Google Inc."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://w.wallhaven.cc/full/zy/wallhaven-zydldy.jpg' />
    <link rel="shortcut icon" href="/favicon.ico" />
<style>
    :root {
     
    --sys-font-family: "HarmonyOS_Sans_SC_Medium", Georgia, -apple-system, 'Nimbus Roman No9 L', 'PingFang SC', 'Hiragino Sans GB', 'Noto Serif SC', 'Microsoft Yahei', 'WenQuanYi Micro Hei', 'ST Heiti', sans-serif;
    --code-font-family: "JetBrainsMono Regular", Menlo, Monaco, Consolas, "Courier New";
    --article-font-family: "HarmonyOS_Sans_SC_Medium", var(--base-font-family);
  }
</style>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://npm.elemecdn.com/irithys-cdn@1.0.4/font/font.css";
        customFont.type = "text/css";
        customFont.rel = "stylesheet";
         document.head.appendChild(customFont);
}());
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended">


        <div id="article-toolbar" style="position: sticky;top: 5px;z-index: 1000;">
            <a href="/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>返回</span>
            </a>
        </div>
    

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" stroke="currentColor" fill="#BDBDBF"><path d="M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM176 168V344C176 352.7 180.7 360.7 188.3 364.9C195.8 369.2 205.1 369 212.5 364.5L356.5 276.5C363.6 272.1 368 264.4 368 256C368 247.6 363.6 239.9 356.5 235.5L212.5 147.5C205.1 142.1 195.8 142.8 188.3 147.1C180.7 151.3 176 159.3 176 168V168z"></path></svg>
            
        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#一golang面向对象编程概念">一、Golang面向对象编程概念</a></li>
    <li><a href="#二匿名字段">二、匿名字段</a>
      <ol>
        <li><a href="#21-匿名字段的概念">2.1 匿名字段的概念</a></li>
        <li><a href="#22-匿名字段初始化">2.2 匿名字段初始化</a>
          <ol>
            <li><a href="#221-顺序初始化">2.2.1 顺序初始化</a></li>
            <li><a href="#222-自动推导类型">2.2.2 自动推导类型</a></li>
            <li><a href="#223-指定成员初始化">2.2.3 指定成员初始化</a></li>
          </ol>
        </li>
        <li><a href="#23-成员操作">2.3 成员操作</a>
          <ol>
            <li><a href="#231-方式一">2.3.1 方式一</a></li>
            <li><a href="#232-方式二">2.3.2 方式二</a></li>
            <li><a href="#233-方式三">2.3.3 方式三</a></li>
          </ol>
        </li>
        <li><a href="#24-同名字段">2.4 同名字段</a></li>
        <li><a href="#25-非结构体匿名字段">2.5 非结构体匿名字段</a></li>
        <li><a href="#26-结构体匿名字段的指针类型">2.6 结构体匿名字段的指针类型</a></li>
      </ol>
    </li>
    <li><a href="#三方法">三、方法</a>
      <ol>
        <li><a href="#31-基本数据类型绑定方法">3.1 基本数据类型绑定方法</a></li>
        <li><a href="#32-结构体类型绑定方法">3.2 结构体类型绑定方法</a>
          <ol>
            <li><a href="#321-示例绑定一个方法实现修改结构体成员值">3.2.1 示例：绑定一个方法，实现修改结构体成员值</a></li>
            <li><a href="#322-针对上面例子的反面教材">3.2.2 针对上面例子的反面教材</a></li>
          </ol>
        </li>
        <li><a href="#33-注意事项">3.3 注意事项</a>
          <ol>
            <li><a href="#331-receivertype接收者的基类型不能是指针">3.3.1 <code>ReceiverType</code>接收者的基类型不能是指针</a></li>
            <li><a href="#332-接收者类型不一样就不同的方法">3.3.2 接收者类型不一样，就不同的方法</a></li>
          </ol>
        </li>
        <li><a href="#34-值语义和引用语义">3.4 值语义和引用语义</a></li>
        <li><a href="#35-方法集">3.5 方法集</a>
          <ol>
            <li><a href="#351-指针变量的方法集">3.5.1 指针变量的方法集</a></li>
            <li><a href="#352-普通变量的方法集">3.5.2 普通变量的方法集</a></li>
            <li><a href="#353-方法集的总结">3.5.3 方法集的总结</a></li>
          </ol>
        </li>
        <li><a href="#36-方法的匿名">3.6 方法的匿名</a></li>
        <li><a href="#37-同名方法">3.7 同名方法</a></li>
        <li><a href="#38-方法值和方法表达式">3.8 方法值和方法表达式</a>
          <ol>
            <li><a href="#381-方法值">3.8.1 方法值</a></li>
            <li><a href="#382-方法表达式">3.8.2 方法表达式</a></li>
            <li><a href="#383-两者的区别">3.8.3 两者的区别</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#四接口">四、接口</a>
      <ol>
        <li><a href="#41-接口声明">4.1 接口声明</a></li>
        <li><a href="#43-调用同一个函数实现不同行为">4.3 调用同一个函数，实现不同行为</a></li>
        <li><a href="#44-接口组合">4.4 接口组合</a>
          <ol>
            <li><a href="#441-接口嵌入">4.4.1 接口嵌入</a></li>
            <li><a href="#442-接口转换">4.4.2 接口转换</a></li>
          </ol>
        </li>
        <li><a href="#45-空接口">4.5 空接口</a>
          <ol>
            <li><a href="#451-可以给空接口类型赋任意类型的值">4.5.1 可以给空接口类型赋任意类型的值</a></li>
            <li><a href="#452-print系列函数的参数列表就是空接口类型">4.5.2 <code>Print()</code>系列函数的参数列表就是空接口类型</a></li>
            <li><a href="#453-mapstringinterface-演示">4.5.3 <code>map[string]interface{}</code> 演示</a></li>
          </ol>
        </li>
        <li><a href="#46-示例使用-sorter-接口排序">4.6 示例：使用 Sorter 接口排序</a>
          <ol>
            <li><a href="#461-目录结构">4.6.1 目录结构</a></li>
            <li><a href="#462-编写接口的代码">4.6.2 编写接口的代码</a></li>
            <li><a href="#463-实现不同数据类型调用同一个接口完成排序">4.6.3 实现：不同数据类型调用同一个接口，完成排序</a></li>
            <li><a href="#464-最终运行结果">4.6.4 最终运行结果</a></li>
            <li><a href="#465-不将-dayarray-声明为结构体的写法">4.6.5 不将 dayArray 声明为结构体的写法</a></li>
            <li><a href="#466-参考文献">4.6.6 参考文献</a></li>
          </ol>
        </li>
        <li><a href="#47-反射包reflect">4.7 反射包<code>reflect</code></a>
          <ol>
            <li><a href="#471-最基本的两个函数">4.7.1 最基本的两个函数</a></li>
            <li><a href="#513-简洁写法">5.1.3 简洁写法</a></li>
          </ol>
        </li>
        <li><a href="#52-type-switch">5.2 type-switch</a>
          <ol>
            <li><a href="#521-基本写法">5.2.1 基本写法</a></li>
            <li><a href="#522-简洁写法">5.2.2 简洁写法</a></li>
            <li><a href="#523-示例1基本示例">5.2.3 示例1：基本示例</a></li>
            <li><a href="#524-示例2判定每个值的类型">5.2.4 示例2：判定每个值的类型</a></li>
            <li><a href="#525-示例3type-switch-配合匿名函数">5.2.5 示例3：<code>type-switch</code> 配合匿名函数</a></li>
            <li><a href="#526-注意事项">5.2.6 注意事项</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/giabprkd/">
                
                    <img src="https://w.wallhaven.cc/full/zy/wallhaven-zydldy.jpg" loading="lazy" alt="Featured image of post Golang学习之面向对象编程" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%90%B9%E6%A2%A6%E5%88%B0%E8%A5%BF%E5%B7%9E/" >
                吹梦到西州
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/giabprkd/">Golang学习之面向对象编程</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" stroke="currentColor" fill="#BDBDBF"><path d="M326.1 160l127.4-127.4C451.7 32.39 449.9 32 448 32h-86.06l-128 128H326.1zM166.1 160l128-128H201.9l-128 128H166.1zM497.7 56.19L393.9 160H512V96C512 80.87 506.5 67.15 497.7 56.19zM134.1 32H64C28.65 32 0 60.65 0 96v64h6.062L134.1 32zM0 416c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V192H0V416z"></path></svg>
                
                <time class="article-time--published">2021/01/08</time>
            </div>
        

        
            <div>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" stroke="currentColor" fill="#BDBDBF"><path d="M256 512C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"></path></svg>
                
                <time class="article-time--reading">
                    阅读时长: 26 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="一golang面向对象编程概念">一、Golang面向对象编程概念</h2>
<p><strong>Golang没有沿袭其他传统编程语言面向对象的概念</strong>：没有封装、继承、多态这些概念，但可以通过别的方式来实现这些特性：</p>
<ul>
<li>封装：通过方法实现</li>
<li>继承：通过匿名字段实现</li>
<li>多态：通过接口实现</li>
</ul>
<h2 id="二匿名字段">二、匿名字段</h2>
<h3 id="21-匿名字段的概念">2.1 匿名字段的概念</h3>
<p>一般情况下，定义结构体的时候是字段名与其类型一一对应，实际上<code>Golang支持只提供类型而不写字段名</code>的方式，这就是匿名字段。
匿名字段的简单体验：
当匿名字段也是一个结构体s1且存在于另一个结构体s2的时候，那么s1结构体的全部字段都会被隐式地引入到结构体s2。此时，匿名字段也可以被称为嵌入字段，实现了&quot;继承&quot;的思想。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span>
</span></span><span class="line"><span class="cl">	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//匿名字段，只有Person类型而没有名字，那么Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//学生额外的字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Student中的Person，Person只是个类型而没有给它起名称，所以Person就是匿名字段！Student中的Person会把Person类型中的字段全部引用过来。</p>
<h3 id="22-匿名字段初始化">2.2 匿名字段初始化</h3>
<h4 id="221-顺序初始化">2.2.1 顺序初始化</h4>
<p>对应结构体中的字段，一个个给值。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">s1</span> <span class="p">=</span> <span class="nx">Student</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Person</span><span class="p">:</span>  <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="c1">//Person本身也是一个结构体，对结构体匿名字段进行初始化需要这样写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">stuNo</span><span class="p">:</span>   <span class="mi">0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">address</span><span class="p">:</span> <span class="s">&#34;Google Inc.&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;s1=&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">)</span> <span class="c1">//s1= {{go 77 11} 0 Google Inc.}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="222-自动推导类型">2.2.2 自动推导类型</h4>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s1</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;Google Inc.&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">)</span> <span class="c1">//s1={Person:{name:go sex:77 age:11} stuNo:0 address:Google Inc.}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>%+v</code> 信息显示地更加详细！从上例中可以看到，每个字段名也打印了出来。
注意：如果结构体中使用了另一个结构体，就必须显示地带上类型，不然就报错！
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s2</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">}</span> <span class="c1">//报错：missing type in composite literal ===&gt; 组合字面量中缺少类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;s2=&#34;</span><span class="p">,</span> <span class="nx">s2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>{&quot;go&quot;, 'M', 11}</code> 前面一定要带上 <code>Person</code> 这个类型！
匿名函数在Golang官方中的叫法是：函数字面量，这里再次看到了字面量这个词语，也可以得知匿名字段也只一个结构体的字面量。</p>
<h4 id="223-指定成员初始化">2.2.3 指定成员初始化</h4>
<p>指定结构体匿名字段的话，就一层套一层地去写。例如：<code>StructName:StructName{FieldName:Value}</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//一层套一层的写法，Person:Person{字段名:值}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s1</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">:</span> <span class="nx">Person</span><span class="p">{</span><span class="nx">name</span><span class="p">:</span> <span class="s">&#34;go&#34;</span><span class="p">},</span> <span class="nx">address</span><span class="p">:</span> <span class="s">&#34;Google Inc.&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">)</span> <span class="c1">//s1={Person:{name:go sex:0 age:0} stuNo:0 address:Google Inc.}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="23-成员操作">2.3 成员操作</h3>
<p>跟操作普通结构体的方式一模一样。</p>
<h4 id="231-方式一">2.3.1 方式一</h4>
<p>结构体字面量（结构体匿名字段）已经被直接引入了，可以用 <code>.</code> 来访问。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s1</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1.name=%v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span> <span class="c1">//直接可以使用了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1.sex=%v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">sex</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1.age=%v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1.stuNo=%v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">stuNo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1.address=%v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">s1.name=go
</span></span></span><span class="line"><span class="cl"><span class="cm">s1.sex=77
</span></span></span><span class="line"><span class="cl"><span class="cm">s1.age=11
</span></span></span><span class="line"><span class="cl"><span class="cm">s1.stuNo=0
</span></span></span><span class="line"><span class="cl"><span class="cm">s1.address=
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="232-方式二">2.3.2 方式二</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s1</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s1</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;Golang&#34;</span> <span class="c1">//修改成员的值，也是直接用点&#34;.&#34;来操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s1</span><span class="p">.</span><span class="nx">address</span> <span class="p">=</span> <span class="s">&#34;Google Inc.&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">)</span> <span class="c1">//s1={Person:{name:Golang sex:77 age:11} stuNo:0 address:Google Inc.}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="233-方式三">2.3.3 方式三</h4>
<p>结构体中的字面量当做一个整体赋值。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s1</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//Person在Student中是一个结构体，可以被整体赋值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s1</span><span class="p">.</span><span class="nx">Person</span> <span class="p">=</span> <span class="nx">Person</span><span class="p">{</span><span class="nx">name</span><span class="p">:</span> <span class="s">&#34;go-lang&#34;</span><span class="p">}</span> <span class="c1">//注意等号&#34;=&#34;后面要带上类型，未给值的将把原来的值给覆盖使用其类型的零值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s1=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s1</span><span class="p">)</span> <span class="c1">//s1={Person:{name:go-lang sex:0 age:0} stuNo:0 address:}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意：<strong>当做一个整体赋值的时候，如果有字段没给值，那么就会使用其类型对应的零值覆盖原值</strong>。</p>
<h3 id="24-同名字段">2.4 同名字段</h3>
<p>实质上跟作用域的规则一样：能在当前作用域内找到的就用当前作用域内的字段，没有找到才往上去找。
例1：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span> <span class="c1">//和Person中的name同名了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">s</span> <span class="nx">Student</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;Golang&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="sc">&#39;M&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="mi">11</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//s={Person:{name: sex:77 age:11} stuNo:0 address: name:Golang}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以看到Person中的name是空字符串，跟作用域的规则一样：<code>s.name</code>能在Student中找到，那么就用了Student中的name，不会去管Person中的name了；而Student中没有sex这个字段，那么程序就会往上去找，找到了Person中有sex字段，就给Person中的sex字段赋值了。
想要使用Person中的name，就需要<code>显示调用</code>。
例2：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span> <span class="c1">//结构体匿名字段，Student默认就包含了Person的所有字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span>   <span class="kt">int</span> <span class="c1">//学号
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span> <span class="c1">//和Person中的name同名了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">s</span> <span class="nx">Student</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;Golang&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="sc">&#39;M&#39;</span> <span class="c1">//Student中没有sex这个字段，会往上去找，找到Person中有sex字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="mi">11</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;01&#34;</span> <span class="c1">//显示调用，指定为Person中的name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="sc">&#39;u&#39;</span> <span class="c1">//指定调用，这里会覆盖之前的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="mi">219</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//s={Person:{name:01 sex:117 age:219} stuNo:0 address: name:Golang}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>显示调用后，两个name都被指定了，就各管各的了。</p>
<h3 id="25-非结构体匿名字段">2.5 非结构体匿名字段</h3>
<p>就是只写数据类型而不写变量名。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">myAddress</span> <span class="kt">string</span> <span class="c1">//自定义类型，说白了就是给一个类型起个别名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span>    <span class="c1">//结构体匿名字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">int</span>       <span class="c1">//普通类型的匿名字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">myAddress</span> <span class="c1">//使用自定义类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">101010</span><span class="p">,</span> <span class="s">&#34;Google Inc.&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nx">Person</span> <span class="p">=</span> <span class="nx">Person</span><span class="p">{</span><span class="nx">name</span><span class="p">:</span> <span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="nx">sex</span><span class="p">:</span> <span class="sc">&#39;m&#39;</span><span class="p">}</span> <span class="c1">//当做一个整体赋值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="kt">int</span> <span class="p">=</span> <span class="mi">999</span> <span class="c1">//直接操作那个类型即可
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nx">myAddress</span> <span class="p">=</span> <span class="s">&#34;贝尔实验室&#34;</span> <span class="c1">//直接操作结构体里的字段即可
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">s={Person:{name:Go sex:77 age:11} int:101010 myAddress:Google Inc.}
</span></span></span><span class="line"><span class="cl"><span class="cm">s={Person:{name:C sex:109 age:0} int:999 myAddress:贝尔实验室}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Student 中的 int 字段就是非结构体（普通类型）匿名字段。</p>
<h3 id="26-结构体匿名字段的指针类型">2.6 结构体匿名字段的指针类型</h3>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">myAddress</span> <span class="kt">string</span> <span class="c1">//自定义类型，说白了就是给一个类型起个别名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">//人
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//学生
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="o">*</span><span class="nx">Person</span>   <span class="c1">//结构体匿名字段的指针类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kt">int</span>       <span class="c1">//普通类型的匿名字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">myAddress</span> <span class="c1">//使用自定义类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//第一种方式，使用取地址符&#34;&amp;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//Student中的Person是指针类型，这里的Person需要在前面加上取地址符&#34;&amp;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">101010</span><span class="p">,</span> <span class="s">&#34;Google Inc.&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;s=%+v\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="c1">//&amp;Person是取内存地址，这样写只会打印出内存地址的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//需要一个个写才能显示真正的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">sex</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">age</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="kt">int</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">myAddress</span><span class="p">)</span> <span class="c1">//Go 77 11 101010 Google Inc.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//第二种方式，new()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">s2</span> <span class="nx">Student</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s2</span><span class="p">.</span><span class="nx">Person</span> <span class="p">=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Person</span><span class="p">)</span> <span class="c1">//分配一个内存地址，让*Person变成一个指向Person的合法指针
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//有合法指向后，即可操作里面的成员
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s2</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;C&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s2</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="sc">&#39;m&#39;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s2</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="mi">48</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s2</span><span class="p">.</span><span class="kt">int</span> <span class="p">=</span> <span class="mi">999</span> <span class="c1">//s2.int不是指针，只是普通类型的匿名字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s2</span><span class="p">.</span><span class="nx">myAddress</span> <span class="p">=</span> <span class="s">&#34;贝尔实验室&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s2</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">s2</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">sex</span><span class="p">,</span> <span class="nx">s2</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nx">age</span><span class="p">,</span> <span class="nx">s2</span><span class="p">.</span><span class="kt">int</span><span class="p">,</span> <span class="nx">s2</span><span class="p">.</span><span class="nx">myAddress</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">s={Person:0xc0000044a0 int:101010 myAddress:Google Inc.}
</span></span></span><span class="line"><span class="cl"><span class="cm">Go 77 11 101010 Google Inc.
</span></span></span><span class="line"><span class="cl"><span class="cm">C 109 48 999 贝尔实验室
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="三方法">三、方法</h2>
<p>在 Golang 中，方法本质上也是一个函数，它要和自定义类型绑定在一起。绑定了某一个类型的函数，被称为方法。带有接收者的函数叫方法，换言之：为某个类型绑定了一个函数，那个函数就被称为方法。
可以给任意自定义类型添加相应的方法（指针和接口类型除外）。
语法：<code>func (receiver ReceiverType) funcName(params) (results)</code>。
<code>receiver</code>：接收者的名称，可任意命名，符合变量命名规则即可。方法要跟自定义类型绑定在一起，被绑定的那个叫接收者。
<code>ReceiverType</code>：接收者的数据类型，可以是T或者*T，但它自身的基类型T不能是接口或指针。</p>
<h3 id="31-基本数据类型绑定方法">3.1 基本数据类型绑定方法</h3>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//自定义一个类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">long</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//给long类型绑定一个Add函数，由tmp来接收，tmp就是接收者
</span></span></span><span class="line"><span class="cl"><span class="c1">//接收者就是传递过来的一个参数，other是调用时小括号里的另一个参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">tmp</span> <span class="nx">long</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">other</span> <span class="nx">long</span><span class="p">)</span> <span class="nx">long</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">tmp</span> <span class="o">+</span> <span class="nx">other</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">a</span> <span class="nx">long</span> <span class="c1">//定义一个变量a，类型是long
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">a</span> <span class="p">=</span> <span class="mi">10</span>     <span class="c1">//long指向的是int类型，所以可以直接给int类型的值，其他类型是不可以的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//a是一个long类型，long类型绑定了一个Add函数，所以a可以调用long类型中的这个Add函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//这里的a其实是一个接收者，传递过去一个参数即可
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">a</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//注意：Add返回的是一个long类型了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;result type is : %T, result=%v\n&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//result type is : main.long, result=30
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>result := a.Add(20)</code> 这行代码中，a 是一个 long 类型的变量，对应地传递给了 long 类型的接收者，20 传递给方法中的形参：</p>
<h3 id="32-结构体类型绑定方法">3.2 结构体类型绑定方法</h3>
<h4 id="321-示例绑定一个方法实现修改结构体成员值">3.2.1 示例：绑定一个方法，实现修改结构体成员值</h4>
<p>注意：结构体是值传递，要修改结构体成员的值需要用到指针。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//带有接收者的函数被称为方法，使用类型来调用
</span></span></span><span class="line"><span class="cl"><span class="c1">//接收者本身就是一个参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">tmp</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">PrintInfo</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;person infos =&#34;</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//修改结构体的成员需要用到指针
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfo</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">sex</span> <span class="kt">byte</span><span class="p">,</span> <span class="nx">age</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="nf">name</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">).</span><span class="nx">sex</span> <span class="p">=</span> <span class="nx">sex</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="nx">age</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//自动推导
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">p</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;m&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span> <span class="c1">//p本身就是一个参数，传递给tmp这个接收者
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//接收者是一个指针类型，需要一个指向合法内存地址的指针
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//new()方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">p1</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">Person</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p1</span><span class="p">.</span><span class="nf">SetInfo</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">48</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p1</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//取地址符方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">p2</span> <span class="nf">Person</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="o">&amp;</span><span class="nx">p2</span><span class="p">).</span><span class="nf">SetInfo</span><span class="p">(</span><span class="s">&#34;Ada&#34;</span><span class="p">,</span> <span class="sc">&#39;F&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p2</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span> <span class="c1">//没有取地址符在这里也可以
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">person infos = {go 109 11}
</span></span></span><span class="line"><span class="cl"><span class="cm">person infos = {C 77 48}
</span></span></span><span class="line"><span class="cl"><span class="cm">person infos = {Ada 70 40}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="322-针对上面例子的反面教材">3.2.2 针对上面例子的反面教材</h4>
<p>如果不传递结构体的内存地址，结构体将以值传递的方式进行传参，不同作用域内的结构体是各管各的。
修改3.2.1的代码成如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">tmp</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">PrintInfo</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;person infos =&#34;</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//修改结构体的成员需要用到指针
</span></span></span><span class="line"><span class="cl"><span class="c1">//未使用指针，接收的是一个拷贝过来的副本，在函数中的任何操作都只是在操作副本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfo</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">sex</span> <span class="kt">byte</span><span class="p">,</span> <span class="nx">age</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="nx">name</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="nx">sex</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="nx">age</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;inner SetInfo():&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p1</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="sc">&#39;m&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;main(), before setting ... &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p1</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">p1</span><span class="p">.</span><span class="nf">SetInfo</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">48</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;main(), after setting ... &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p1</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">main(), before setting ... person infos = {go 109 11}
</span></span></span><span class="line"><span class="cl"><span class="cm">inner SetInfo(): {C 77 48}
</span></span></span><span class="line"><span class="cl"><span class="cm">main(), after setting ... person infos = {go 109 11}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>结构体传参，默认是值传递：只是把一份副本拷贝过去</strong>。在SetInfo()函数中的所有操作都只是在操作这个副本，SetInfo()函数结束后，这个副本就被回收了。那么在main()中，是找不到这个副本的，所以依然会使用之前的。
在另外一个函数中想要修改结构体成员的值，必须传址！</p>
<h3 id="33-注意事项">3.3 注意事项</h3>
<h4 id="331-receivertype接收者的基类型不能是指针">3.3.1 <code>ReceiverType</code>接收者的基类型不能是指针</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">long</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//接收者不使用的话，可以省略不写
</span></span></span><span class="line"><span class="cl"><span class="c1">//没问题可以编译通过
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">long</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">second</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">bigInt</span> <span class="o">*</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="c1">//报错：invalid receiver type bigInt (bigInt is a pointer type)
</span></span></span><span class="line"><span class="cl"><span class="c1">//非法的接收者类型（bigInt是一个指针类型）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">tmp</span> <span class="nx">bigInt</span><span class="p">)</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">second</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//这样是能编译通过的
</span></span></span><span class="line"><span class="cl"><span class="c1">//接收者接收一个内存地址，而long本身它是int类型，不是指针类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">tmp</span> <span class="o">*</span><span class="nx">long</span><span class="p">)</span> <span class="nf">SetValue</span><span class="p">(</span><span class="nx">value</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>bigInt 是一个接收者类型，它本身是一个 int 指针，而** Golang 规定方法的接收者类型不允许为指针**！</p>
<h4 id="332-接收者类型不一样就不同的方法">3.3.2 接收者类型不一样，就不同的方法</h4>
<p>下例不会出现重复定义的错误：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">char</span> <span class="kt">byte</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">long</span> <span class="kt">int32</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">char</span><span class="p">)</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">l</span> <span class="nx">long</span><span class="p">)</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="34-值语义和引用语义">3.4 值语义和引用语义</h3>
<p>就是值传递与引用传递的区别，值传递称为值语义，引用传递称为引用语义。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//值传递（值语义），传过来的是实参的一份副本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfoValue</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">sex</span> <span class="kt">byte</span><span class="p">,</span> <span class="nx">age</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="nx">name</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="nx">sex</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="nx">age</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;SetInfoValue(): p address:%p, p=%v\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="c1">//这里的接收者不是一个指针类型，所以取地址要加上取地址符&#34;&amp;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//引用传递（引用语义），接收一个内存地址的实参
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfoPointer</span><span class="p">(</span><span class="nx">name</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">sex</span> <span class="kt">byte</span><span class="p">,</span> <span class="nx">age</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">name</span> <span class="p">=</span> <span class="nx">name</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">sex</span> <span class="p">=</span> <span class="nx">sex</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nx">age</span> <span class="p">=</span> <span class="nx">age</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//这里的接收者本身就是一个指针，存放的就是内存地址，无需加取地址符
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//取值还是需要加上星花符&#34;*&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;SetInfoPointer():p address:%p, p=%v\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="o">*</span><span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;main(): s address:%p, s=%v\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">s</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//值语义
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nf">SetInfoValue</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//引用语义，取出内存地址当做参数传递过去
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">(</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">).</span><span class="nf">SetInfoPointer</span><span class="p">(</span><span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">main(): s address:0xc0000044a0, s={Go 77 11}
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoValue(): p address:0xc000004500, p={C 77 42}
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoPointer():p address:0xc0000044a0, p={C 77 42}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>SetInfoValue() 它绑定的接收者是一个普通类型，结构体默认是值传递，所以得到的是一份实参的拷贝，进了这个函数中，main() 中的实参和 SetInfoValue() 中的实参，各管各的了，互不相关。
SetInfoPointer() 它绑定的接收者是一个指针类型，需要的是一个内存地址的实参。得到了变量的内存地址，那么无论哪里修改，都是在修改内存地址中的值，一处修改影响原本的实参。</p>
<h3 id="35-方法集">3.5 方法集</h3>
<p>类型的方法集是指：可以被该类型变量调用的所有方法的集合。
用一个变量（value/pointer）调用方法（含匿名字段）不受方法集约束，编译器总能够查找全部方法，并自动转换 <code>receiver</code> 实参。</p>
<h4 id="351-指针变量的方法集">3.5.1 指针变量的方法集</h4>
<p>结构体变量是一个指针变量，它能够调用哪些方法，这些方法就是一个集合，简称：方法集。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfoValue</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;SetInfoValue&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfoPointer</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;SetInfoPointer&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//初始化一个指针变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">p</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Golang&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span> <span class="c1">//指针指向内存地址，所以用取地址符&#34;&amp;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nf">SetInfoPointer</span><span class="p">()</span> <span class="c1">//指针变量理所当然能够调用指针接收者的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//SetInfoValue()的接收者是一个普通类型变量，但p是一个指针类型变量。此时，Golang内部就会做自动转换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//先把指针变量p，转换成(*p)，然后再调用。实际上它的操作就是 (*p).SetInfoValue()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//实参p是一个指针类型变量，但接收者是一个普通类型变量，此时Golang内部就会自动转换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">p</span><span class="p">.</span><span class="nf">SetInfoValue</span><span class="p">()</span> <span class="c1">//经过内部转换，指针变量同时也能调用非指针接收者的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	
</span></span><span class="line"><span class="cl">	<span class="c1">//这里手动显示转换，取值符把指针变量变成了普通变量，接收者也是一个普通变量，Golang不会去自动转换了，略微提高了性能
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">).</span><span class="nf">SetInfoValue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//手动把指针变量p，转换为普通变量p，也能调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//Golang内部会去再次做转换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">).</span><span class="nf">SetInfoPointer</span><span class="p">()</span> <span class="c1">//取值了，就变成了普通变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoPointer
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoValue
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoValue
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoPointer
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="352-普通变量的方法集">3.5.2 普通变量的方法集</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span> <span class="c1">//最终以ASCII码值的方式打印
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfoValue</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;SetInfoValue&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">SetInfoPointer</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;SetInfoPointer&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//普通变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">p</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Golang&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span> <span class="c1">//指针指向内存地址，所以用取地址符&#34;&amp;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//内部先把普通变量p，转换为&amp;p后再调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//实际上它是 (&amp;p).SetInfoPointer()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">p</span><span class="p">.</span><span class="nf">SetInfoPointer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nf">SetInfoValue</span><span class="p">()</span> <span class="c1">//p本身就是个普通变量，当然能掉普通接收者类型的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoPointer
</span></span></span><span class="line"><span class="cl"><span class="cm">SetInfoValue
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="353-方法集的总结">3.5.3 方法集的总结</h4>
<p>结构体变量要去调用方法，无需关心结构体变量是指针类型还是普通类型，Golang 非常智能，内部都会去做对应的转换，以适应最终的 <code>ReceiverType</code>。</p>
<h3 id="36-方法的匿名">3.6 方法的匿名</h3>
<p>使用了嵌入字段，同业也会将那个字段的方法引用过来。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span>
</span></span><span class="line"><span class="cl">	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//给Person结构体绑定一个方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">PrintInfo</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;name=%s, sex=%c, age=%d\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">sex</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nx">age</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Student引用Person结构体
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span>  <span class="c1">//匿名字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">stuNo</span>   <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">1010</span><span class="p">,</span> <span class="s">&#34;Google Inc.&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//Student结构体引用Person，Person中有PrintInfo()方法，因此Student结构体变量也可以直接调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">name=Go, sex=M, age=11
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Student 有对 Person 结构体的引用，Person 结构体绑定了一个方法，既然 Student 引用了 Person 这个结构体，那么同时也会得到 Person 所有的属性和方法。</p>
<h3 id="37-同名方法">3.7 同名方法</h3>
<p>在 3.3.2 中已经提及过这个概念，接收者不一样，就算方法名一样，那么也是两个不同的方法，只是看起来名字一样而已。查找规则跟作用域原则一致！
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span>
</span></span><span class="line"><span class="cl">	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">PrintInfo</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;*Person=%+v\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Person</span>  <span class="c1">//匿名字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">stuNo</span>   <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">PrintInfo</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;*Student=%+v\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">},</span> <span class="mi">1010</span><span class="p">,</span> <span class="s">&#34;Google Inc.&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//查找规则跟作用域原则的一样，先找自己本身
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//只想调用Person的那个PrintInfo()，就需要显示调用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nx">Person</span><span class="p">.</span><span class="nf">PrintInfo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">*Student={Person:{name:Go sex:77 age:11} stuNo:1010 address:Google Inc.}
</span></span></span><span class="line"><span class="cl"><span class="cm">*Person={name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="38-方法值和方法表达式">3.8 方法值和方法表达式</h3>
<h4 id="381-方法值">3.8.1 方法值</h4>
<p>本质上是方法的字面量，将方法的入口（可以简单理解成：函数体）赋值给一个变量，变量保存了这个方法的入口，可以直接使用<code>变量名()</code>方式调用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span>
</span></span><span class="line"><span class="cl">	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">SetValue</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;SetValue: p address=%p, p=%+v\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="c1">//普通类型变量，格式化地址值需要加取地址符&#34;&amp;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">SetPointer</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;SetPointer: p address=%p, p=%+v\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="c1">//p本身就是指针类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;main: p address=%p, p=%+v\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">.</span><span class="nf">SetPointer</span><span class="p">()</span> <span class="c1">//传统调用方式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">pFunc</span> <span class="o">:=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">SetPointer</span> <span class="c1">//将方法的入口赋值给变量，变量就保存了该方法。这个就是方法值，调用方法时无需再传接收者，因为已经隐藏了接收者
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">pFunc</span><span class="p">()</span>               <span class="c1">//pFunc这个变量保存了一个方法，可以直接加圆括号调用。等价于 p.SetPointer()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//普通数据类型使用方法值也是一样的操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">vFunc</span> <span class="o">:=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">SetValue</span> <span class="c1">//将方法的入口赋值给一个变量，隐藏了接收者
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">vFunc</span><span class="p">()</span>             <span class="c1">//等价于 p.SetValue()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">main: p address=0xc0000044a0, p={name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">SetPointer: p address=0xc0000044a0, p=&amp;{name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">SetPointer: p address=0xc0000044a0, p=&amp;{name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">SetValue: p address=0xc000004540, p={name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="382-方法表达式">3.8.2 方法表达式</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sex</span>  <span class="kt">byte</span>
</span></span><span class="line"><span class="cl">	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">Person</span><span class="p">)</span> <span class="nf">SetValue</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;SetValue: p address=%p, p=%+v\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="c1">//普通类型变量，格式化地址值需要加取地址符&#34;&amp;&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">Person</span><span class="p">)</span> <span class="nf">SetPointer</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;SetPointer: p address=%p, p=%+v\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="c1">//p本身就是指针类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span> <span class="o">:=</span> <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="sc">&#39;M&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;main: p address=%p, p=%+v\n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">f1</span> <span class="o">:=</span> <span class="p">(</span><span class="o">*</span><span class="nx">Person</span><span class="p">).</span><span class="nx">SetPointer</span> <span class="c1">//接收者是指针类型，就需要加上星花符&#34;*&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">f1</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">p</span><span class="p">)</span> <span class="c1">//显示地把实参传递给接收者，等价于 p.SetPointer()
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">f2</span> <span class="o">:=</span> <span class="p">(</span><span class="nx">Person</span><span class="p">).</span><span class="nx">SetValue</span> <span class="c1">//接收者是普通数据类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">f2</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="c1">//显示地把变量传递给接收者
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">main: p address=0xc0000044a0, p={name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">SetPointer: p address=0xc0000044a0, p=&amp;{name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">SetValue: p address=0xc000004520, p={name:Go sex:77 age:11}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="383-两者的区别">3.8.3 两者的区别</h4>
<p>方法值把接收者的实参给隐藏了起来，方法表达式需要显示传参，只是写法上的不同而已。本质上都是保存了方法的入口，让变量变成一个方法字面量。</p>
<h2 id="四接口">四、接口</h2>
<p>接口实现了&quot;多态&quot;的思想。接口跟结构体很像，<strong>结构体里面放的是成员（属性）、变量，接口里面放的是方法（实际上就是函数）的声明</strong>，方法由其他类型实现。
在 Golang 中，接口 <code>interface</code> 是一个自定义类型，接口类型具体描述了一系列方法的集合。（方法由其他类型定义）
接口类型只会展示出它们自己的方法，它不会暴露出它所代表的内部值的结构和支持的基础操作的集合。
Golang 的接口实现了鸭子类型 <code>duck-typing</code>，我不关心这只动物到底是鸟还是鸭子还是鸵鸟，我只要看到它走起来像鸭子、游泳起来像鸭子或者叫起来像鸭子，那么这只动物就是鸭子。总结：不关心数据类型，只关心行为。不关心最终由哪个类型来实现，只关心最终实现了什么行为！</p>
<h3 id="41-接口声明">4.1 接口声明</h3>
<p>基本语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Humaner</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">SayHi</span><span class="p">()</span> <span class="nx">ReturnType</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="mi">123</span>
</span></span><span class="line"><span class="cl"><span class="s">```go
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">注意事项：
</span></span></span><span class="line"><span class="cl"><span class="s">1.接口命名习惯以 `</span><span class="nx">er</span><span class="s">` 结尾。
</span></span></span><span class="line"><span class="cl"><span class="s">2.接口只有方法声明，没有实现，没有数据字段。
</span></span></span><span class="line"><span class="cl"><span class="s">3.接口可以匿名嵌入其他接口，或嵌入到结构中。
</span></span></span><span class="line"><span class="cl"><span class="s">4.声明带返回值的方法时，把返回值类型写在方法名的小括号后面。
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">### 4.2 接口实现
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">接口是用来定义行为（方法）的类型。这些被定义的行为不由接口直接实现，而是由用户定义的类型实现。
</span></span></span><span class="line"><span class="cl"><span class="s">如果用户定义的类型实现了某个接口类型声明的一组方法，那么这个用户定义的类型的值就可以赋值给这个接口类型的值。这个赋值会把用户定义的类型的值存入接口类型的值。
</span></span></span><span class="line"><span class="cl"><span class="s">示例：
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">```</span><span class="k">go</span>
</span></span><span class="line"><span class="cl"><span class="c1">//定义接口类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Humaner</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//方法的声明，没有实现，由别的类型（自定义类型）实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Student类型实现了sayhi()方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student[%s, %d], say hi.\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">stuNo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Teacher</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">group</span>   <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Teacher类型实现了sayhi()方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">Teacher</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Teacher[%s, %s], say hi.\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MyStr</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">MyStr</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;MyStr[%s], say hi.\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">s</span><span class="p">)</span> <span class="c1">//取地址中的值，需要星花符&#34;*&#34;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//定义接口类型的变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">i</span> <span class="nx">Humaner</span> <span class="c1">//i的类型是Humaner接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//只要实现了此接口方法的类型，那么这个类型的变量（接收者类型）就可以赋值给接口的变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Student</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">1010</span><span class="p">}</span> <span class="c1">//接收者是指针类型，需要取出内存地址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">i</span> <span class="p">=</span> <span class="nx">s</span>
</span></span><span class="line"><span class="cl">	<span class="nx">i</span><span class="p">.</span><span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">t</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Teacher</span><span class="p">{</span><span class="s">&#34;Google Inc.&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">i</span> <span class="p">=</span> <span class="nx">t</span>
</span></span><span class="line"><span class="cl">	<span class="nx">i</span><span class="p">.</span><span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//把接口类型赋值给自定义类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">str</span> <span class="nx">MyStr</span> <span class="p">=</span> <span class="s">&#34;hello go&#34;</span> <span class="c1">//需要显示写上MyStr类型，没有写，就会默认推导成字符串类型。字符串类型和MyStr类型，不是同一个类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">i</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">str</span>
</span></span><span class="line"><span class="cl">	<span class="nx">i</span><span class="p">.</span><span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">Student[Go, 1010], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">Teacher[Google Inc., Go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">MyStr[hello go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>同一个接口实现了不同的表现，就看给接口类型的变量，赋值了一个什么类型。
大致流程分析：
首先：声明了一个接口类型，这个接口类型中有一个叫 sayhi() 的方法。<strong>接口类型只有方法的声明，没有方法的实现以及其他任何属性、变量</strong>。
接下来：每一个结构体都实现了该方法。以 <code>func (s *Student) sayhi() {...}</code> 为例，sayhi 中实现了一些行为（说白了就是写了些代码，要 <code>*Student</code> 这个类型干些什么事情），并绑定到了 <code>*Student</code> 类型中。
紧接着：定义了一个接口变量 i，<code>&amp;Student</code> 赋值给了 i（因为 Student 的接收者类型是一个指针类型，所以需要传递一个内存地址给它）。调用 <code>i.sayhi()</code> 的时候，就会去找 <code>&amp;Student</code> 中的那个 sayhi() 方法。
同理：Teacher 的地址重新赋值给了 i，再次调用 <code>i.sayhi()</code> 的时候，就会去找 <code>&amp;Teacher</code> 中的那个 sayhi() 方法。
最后：自定义类型 MyStr 的变量 <code>&amp;str</code> 赋值给了i，调用的时候就会去找 <code>&amp;MyStr</code> 中的那个 sayhi() 方法。注意：MyStr 一定要显示写法，不写的话，str 就会被自动推导成为 string 类型。string 类和 MyStr 类型，根本不是同一个数据类型，肯定会报错！
总结：就看给接口变量赋值了什么类型的变量，根据赋值的变量类型，自动选择赋值变量类型所匹配的方法。</p>
<h3 id="43-调用同一个函数实现不同行为">4.3 调用同一个函数，实现不同行为</h3>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//定义接口类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Humaner</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//方法的声明，没有实现，由别的类型（自定义类型）实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Student类型实现了sayhi()方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student[%s, %d], say hi.\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">stuNo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Teacher</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">address</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">group</span>   <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Teacher类型实现了sayhi()方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">Teacher</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Teacher[%s, %s], say hi.\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">MyStr</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">MyStr</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;MyStr[%s], say hi.\n&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//定义一个函数，接收接口类型的参数，一种接口实现多种行为
</span></span></span><span class="line"><span class="cl"><span class="c1">//参数接收一个实现了Humaner接口类型中sayhi()方法的变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">WhoSayHi</span><span class="p">(</span><span class="nx">i</span> <span class="nx">Humaner</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">i</span><span class="p">.</span><span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Student</span><span class="p">{</span><span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">1010</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">t</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Teacher</span><span class="p">{</span><span class="s">&#34;Google Inc.&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">str</span> <span class="nx">MyStr</span> <span class="p">=</span> <span class="s">&#34;hello go&#34;</span> <span class="c1">//需要显示写上MyStr类型，没有写，就会默认推导成字符串类型。string类型和MyStr类型，不是同一个类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//下面3次调用同一个函数，但实现了不同的表现行为
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">WhoSayHi</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="c1">//WhoSayHi的参数是一个普通接口类型，但结构体接收者的类型是*Student，所以s的类型需要是一个指针类型（内存地址）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">WhoSayHi</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WhoSayHi</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;-----------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//创建一个切片，数据类型是Humaner接口类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//此例中的变量只有3个，长度千万不要超了，不然第4个开始，就是空指针了，会报错！除非再另外赋值新的变量并加入到切片中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">hs</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="nx">Humaner</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="nx">s</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="nx">t</span>
</span></span><span class="line"><span class="cl">	<span class="nx">hs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">str</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">i</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">hs</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//每个i都是实现了Humaner接口类型的结构体变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nf">WhoSayHi</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="c1">//两者写法等价
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">i</span><span class="p">.</span><span class="nf">sayhi</span><span class="p">()</span>   <span class="c1">//两者写法等价
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">Student[Go, 1010], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">Teacher[Google Inc., Go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">MyStr[hello go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">-----------------------------
</span></span></span><span class="line"><span class="cl"><span class="cm">Student[Go, 1010], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">Student[Go, 1010], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">Teacher[Google Inc., Go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">Teacher[Google Inc., Go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">MyStr[hello go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">MyStr[hello go], say hi.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>简单理解：<code>func WhoSayHi(i Humaner) { i.sayhi() }</code>这段代码中，<code>i Humaner</code> 不需要关心传过来的变量类型是什么，它只看那个变量有没有实现了 <code>sayhi()</code> 方法。只要传过来的变量中实现了 <code>sayhi()</code> 方法，那么Golang就会自行去查找该变量中的函数。如果该变量中没有实现 <code>sayhi()</code> 方法，让 Golang 怎么能找得到？</p>
<h3 id="44-接口组合">4.4 接口组合</h3>
<p>接口组合的两种表现形式：接口嵌入、接口转换。</p>
<h4 id="441-接口嵌入">4.4.1 接口嵌入</h4>
<p>如果一个 interface1 作为 interface2 的一个嵌入字段，那么 interface2 隐式地包含了 interface1 里面的所有方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Humaner</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Songster</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Humaner</span> <span class="c1">//引用了Humaner这个接口，同时也包含了Humaner接口中的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">sing</span><span class="p">(</span><span class="nx">lrc</span> <span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Student实现Humaner中的sayhi()方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student[%s, %d], sayhi.\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">stuNo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Student同时也实现了sing()这个方法，定义时有参数，实现的时候也必须对应带上参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sing</span><span class="p">(</span><span class="nx">lrc</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student %s, is sing: %s\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">lrc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">i</span> <span class="nx">Songster</span> <span class="c1">//声明一个接口类型的变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//结构体的接收者是个指针类型，所以需要给它一个内存地址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Student</span><span class="p">{</span><span class="s">&#34;xxxyyy&#34;</span><span class="p">,</span> <span class="mi">999</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">i</span> <span class="p">=</span> <span class="nx">s</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">i</span><span class="p">.</span><span class="nf">sayhi</span><span class="p">()</span> <span class="c1">//Songster接口嵌入了Humaner接口，Humaner接口中有sayhi()方法，那么Songster接口也会有这个方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">i</span><span class="p">.</span><span class="nf">sing</span><span class="p">(</span><span class="s">&#34;god is a girl&#34;</span><span class="p">)</span> <span class="c1">//Songster接口自己独有的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">Student[xxxyyy, 999], sayhi.
</span></span></span><span class="line"><span class="cl"><span class="cm">Student xxxyyy, is sing: god is a girl
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Songster 接口中嵌入了 Humaner 接口，那么 Songster 就会得到 Humaner 接口中的所有方法。只需要实现 Songster 接口中的方法即可！
还有一个更加简洁的写法，修改上述 main() 中的代码成如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//结构体的接收者是个指针类型，所以需要给它一个内存地址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">Student</span><span class="p">{</span><span class="s">&#34;xxxyyy&#34;</span><span class="p">,</span> <span class="mi">999</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">s</span><span class="p">.</span><span class="nf">sayhi</span><span class="p">()</span> <span class="c1">//Songster接口嵌入了Humaner接口，Humaner接口中有sayhi()方法，那么Songster接口也会有这个方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span><span class="p">.</span><span class="nf">sing</span><span class="p">(</span><span class="s">&#34;god is a girl&#34;</span><span class="p">)</span> <span class="c1">//Songster接口自己独有的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>运行结果一模一样，大致流程：结构体 Student 已经实现了 sayhi() 和 sing(lrc string) 这两个方法，那么就绑定在了一起。只需要有这个结构体类型的变量，即可找到它已经实现的这两个方法。</p>
<h4 id="442-接口转换">4.4.2 接口转换</h4>
<p>需要配合接口嵌入来使用。如果 interface2 嵌入了 interface1，那么 interface2 就可以转换给 interface1，因为 interface2 中即包含了它自己本身的方法也包含了 interface1 的方法；而 interface1 不能转换给 interface2，因为 interface1 没有嵌入 interface2，就没有 interface2 中的方法，所以不能转换。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Humaner</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Songster</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Humaner</span> <span class="c1">//引用了Humaner这个接口，同时也包含了Humaner接口中的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">sing</span><span class="p">(</span><span class="nx">lrc</span> <span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Student实现Humaner中的sayhi()方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student[%s, %d], sayhi.\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">stuNo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//Student同时也实现了sing()这个方法，定义时有参数，实现的时候也必须对应带上参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sing</span><span class="p">(</span><span class="nx">lrc</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student %s, is sing: %s\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">lrc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">i1</span> <span class="nx">Humaner</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">i2</span> <span class="nx">Songster</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">i1</span> <span class="p">=</span> <span class="nx">i2</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;i1=&#34;</span><span class="p">,</span> <span class="nx">i1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">i1= &lt;nil&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上例中，Songster 接口嵌入了 Humaner 接口，所以 Songster 接口即有自己的方法又有 Humaner 的方法，Songster 可以转换给 Humaner；Humaner 没有 Songster 中的方法，所以不能把 Humaner 给 Songster 。
如果把 Songster 给了 Humaner，就会报错：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">i1</span> <span class="nx">Humaner</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">i2</span> <span class="nx">Songster</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">i2</span> <span class="p">=</span> <span class="nx">i1</span> <span class="c1">//报错：Humaner does not implement Songster (missing sing method) ===&gt; Humaner没有实现Songster，缺少sing方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;i2=&#34;</span><span class="p">,</span> <span class="nx">i2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以用另外一种更加简洁的概念来理解：<code>超集</code> <code>子集</code>。<code>超集</code>就是方法数量多的那个接口，<code>子集</code>就是方法数量少的那个接口。<strong>超集可以给子集，子集不能给超集</strong>
详看下例代码的注释：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">//子集：这个接口的方法数量少
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Humaner</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">sayhi</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//超集：这个接口的方法数量多
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Songster</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Humaner</span> <span class="c1">//引用了Humaner这个接口，同时也包含了Humaner接口中的方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">sing</span><span class="p">(</span><span class="nx">lrc</span> <span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sayhi</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student[%s, %d], sayhi.\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">stuNo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">Student</span><span class="p">)</span> <span class="nf">sing</span><span class="p">(</span><span class="nx">lrc</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Student %s, is sing: %s\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">lrc</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">i1</span> <span class="nx">Humaner</span>  <span class="c1">//子集
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">i2</span> <span class="nx">Songster</span> <span class="c1">//超集
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//超集可以给子集
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">i1</span> <span class="p">=</span> <span class="nx">i2</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;i1=&#34;</span><span class="p">,</span> <span class="nx">i1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">i1= &lt;nil&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>代码能编得过，没有问题。</p>
<h3 id="45-空接口">4.5 空接口</h3>
<p>空接口 <code>interface({})</code> 不包含任何方法，可以接收任意类型。正因为如此，所有的类型都实现了空接口，空接口可以存储任意类型的数值。<strong>空接口就是个万能类型，能够保存任意类型的值</strong>。</p>
<h4 id="451-可以给空接口类型赋任意类型的值">4.5.1 可以给空接口类型赋任意类型的值</h4>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Any</span> <span class="kd">interface</span><span class="p">{}</span> <span class="c1">//any或Any，是空接口一个很好的别名或缩写
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">age</span>  <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">any</span> <span class="nx">Any</span> <span class="c1">//空接口可以给任何值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">any</span> <span class="p">=</span> <span class="mi">123</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;any type is: %T, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">any</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">any</span> <span class="p">=</span> <span class="s">&#34;Golang&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;any type is: %T, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">any</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">any</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;any type is: %T, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">any</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">any</span> <span class="p">=</span> <span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Golang&#34;</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;any type is: %T, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">any</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">any</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">Person</span><span class="p">{</span><span class="s">&#34;Rob Pike&#34;</span><span class="p">,</span> <span class="mi">55</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;any type is: %T, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">any</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">any type is: int, value = 123
</span></span></span><span class="line"><span class="cl"><span class="cm">any type is: string, value = Golang
</span></span></span><span class="line"><span class="cl"><span class="cm">any type is: bool, value = true
</span></span></span><span class="line"><span class="cl"><span class="cm">any type is: main.Person, value = {Golang 11}
</span></span></span><span class="line"><span class="cl"><span class="cm">any type is: *main.Person, value = &amp;{Rob Pike 55}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="452-print系列函数的参数列表就是空接口类型">4.5.2 <code>Print()</code>系列函数的参数列表就是空接口类型</h4>
<p>当函数可以接收任意类型的时候，我们会将其参数类型声明为：空接口 <code>interface{}</code> 类型。最经典的例子就是标准库 <code>fmt</code> 中 <code>Print</code> 系列的函数。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">v1</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">v2</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="s">&#34;Google&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">v3</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">v2</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">v4</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="kd">struct</span><span class="p">{</span> <span class="nx">X</span> <span class="kt">int</span> <span class="p">}{</span><span class="mi">1</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">v5</span> <span class="kd">interface</span><span class="p">{}</span> <span class="p">=</span> <span class="o">&amp;</span><span class="kd">struct</span><span class="p">{</span> <span class="nx">X</span> <span class="kt">int</span> <span class="p">}{</span><span class="mi">1</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;v1=%v, v2=%v, v3=%v, v4=%v, v5=%v\n&#34;</span><span class="p">,</span> <span class="nx">v1</span><span class="p">,</span> <span class="nx">v2</span><span class="p">,</span> <span class="nx">v3</span><span class="p">,</span> <span class="nx">v4</span><span class="p">,</span> <span class="nx">v5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">v1=1, v2=Google, v3=0xc0000341f0, v4={1}, v5=&amp;{1}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>标准库 <code>fmt</code> 中 <code>Println()</code> 函数的定义：<code>func Println(a ...interface{}) (n int, err error)</code>，它的参数就是可以接收 0 个或多个的任意类型参数。</p>
<h4 id="453-mapstringinterface-演示">4.5.3 <code>map[string]interface{}</code> 演示</h4>
<p>利用 <code>interface{}</code> 可以存放任意类型的值，这个特性。实现 <code>map</code> 多种数据类型的存储、读取。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;int&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">123</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;string&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;hello&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;bool&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;float64&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mf">123.111</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;nil&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;slice&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">m2</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m2</span><span class="p">[</span><span class="s">&#34;aaa&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;map&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="nx">m2</span> <span class="c1">// 在 map 中，嵌套另一个 map
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">m</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;key=%s, value=%v\n&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">key=string, value=hello
</span></span></span><span class="line"><span class="cl"><span class="cm">key=bool, value=true
</span></span></span><span class="line"><span class="cl"><span class="cm">key=float64, value=123.111
</span></span></span><span class="line"><span class="cl"><span class="cm">key=nil, value=&lt;nil&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">key=slice, value=[1 2 3]
</span></span></span><span class="line"><span class="cl"><span class="cm">key=map, value=map[aaa:0]
</span></span></span><span class="line"><span class="cl"><span class="cm">key=int, value=123
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>map</code> 是无序的，所以每次打印结果的顺序都有可能不同。
参考文献：</p>
<blockquote>
<p><a class="link" href="https://github.com/fengchunjian/goexamples/blob/master/map_interface/null_interface.go"  target="_blank" rel="noopener"
    >https://github.com/fengchunjian/goexamples/blob/master/map_interface/null_interface.go</a>
<a class="link" href="http://blog.ninja911.com/blog-show-blog_id-76.html"  target="_blank" rel="noopener"
    >http://blog.ninja911.com/blog-show-blog_id-76.html</a></p>
</blockquote>
<h3 id="46-示例使用-sorter-接口排序">4.6 示例：使用 Sorter 接口排序</h3>
<p>编写一个接口，实现对不同数据类型的冒泡排序。
要对一组数字或字符串排序，只需要实现三个方法：
1.反映元素个数的 <code>Len()</code> 方法。
2.比较第 i 和 j 个元素的 <code>Less(i, j)</code> 方法。
3.交换第 i 和 j 个元素的 <code>Swap(i, j)</code> 方法。</p>
<h4 id="461-目录结构">4.6.1 目录结构</h4>
<p>XXX</p>
<h4 id="462-编写接口的代码">4.6.2 编写接口的代码</h4>
<p>编写一个接口，实现排序时，传过去的实参是这个接口类型。
./sort/sort.go 文件的代码如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">sort</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//声明接口，并声明需要实现的3个方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Sorter</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Len</span><span class="p">()</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//实现冒泡排序的函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">Sort</span><span class="p">(</span><span class="nx">data</span> <span class="nx">Sorter</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//参数为接口类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">pass</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">pass</span> <span class="p">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nf">Len</span><span class="p">();</span> <span class="nx">pass</span><span class="o">++</span> <span class="p">{</span> <span class="c1">//data.Len()，获取该类型的长度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nf">Len</span><span class="p">()</span><span class="o">-</span><span class="nx">pass</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//比较两个数值的大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="k">if</span> <span class="nx">data</span><span class="p">.</span><span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">data</span><span class="p">.</span><span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//实现交换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//检测是否已实现了排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">IsSorted</span><span class="p">(</span><span class="nx">data</span> <span class="nx">Sorter</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">n</span> <span class="o">:=</span> <span class="nx">data</span><span class="p">.</span><span class="nf">Len</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">data</span><span class="p">.</span><span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">return</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//声明IntArray变量为，切片类型存放int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">IntArray</span> <span class="p">[]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//IntArray类型实现接口中的Len()方法，接收者为普通参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">IntArray</span><span class="p">)</span> <span class="nf">Len</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//IntArray类型实现接口中的Less(i, j int)bool方法，接收者为普通参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">IntArray</span><span class="p">)</span> <span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">&lt;</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//IntArray类型实现接口中的Swap(i, j int)方法，接收者为普通参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">IntArray</span><span class="p">)</span> <span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//定义StringArray变量为，切片类型存放字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">StringArray</span> <span class="p">[]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">StringArray</span><span class="p">)</span> <span class="nf">Len</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">StringArray</span><span class="p">)</span> <span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">&lt;</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="nx">StringArray</span><span class="p">)</span> <span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="nx">p</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">p</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//对一个int切片进行排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">SortInts</span><span class="p">(</span><span class="nx">a</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Sort</span><span class="p">(</span><span class="nf">IntArray</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="c1">//将a转换为IntArray类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//对一个string切片进行排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">SortStrings</span><span class="p">(</span><span class="nx">a</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Sort</span><span class="p">(</span><span class="nf">StringArray</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="c1">//将a转换为StringArray类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">IntsAreSorted</span><span class="p">(</span><span class="nx">a</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">IsSorted</span><span class="p">(</span><span class="nf">IntArray</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">StringsAreSorted</span><span class="p">(</span><span class="nx">a</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nf">IsSorted</span><span class="p">(</span><span class="nf">StringArray</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="463-实现不同数据类型调用同一个接口完成排序">4.6.3 实现：不同数据类型调用同一个接口，完成排序</h4>
<p>./main.go 文件的代码如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span><span class="lnt">90
</span><span class="lnt">91
</span><span class="lnt">92
</span><span class="lnt">93
</span><span class="lnt">94
</span><span class="lnt">95
</span><span class="lnt">96
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;gitee.com/quanquan616/mySorter/sort&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ints</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//初始化一个切片，里面存放int值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">data</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">74</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">238</span><span class="p">,</span> <span class="o">-</span><span class="mi">784</span><span class="p">,</span> <span class="mi">9845</span><span class="p">,</span> <span class="mi">959</span><span class="p">,</span> <span class="mi">905</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">7586</span><span class="p">,</span> <span class="o">-</span><span class="mi">5467984</span><span class="p">,</span> <span class="mi">7586</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//将这个切片类型，转换为IntArray类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">a</span> <span class="o">:=</span> <span class="nx">sort</span><span class="p">.</span><span class="nf">IntArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//因为IntArray类型已经实现了Sorter接口中的所有方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//经过上一步的转换，此时a已经是IntArray类型，所以它与Sorter接口类型吻合
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">sort</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">sort</span><span class="p">.</span><span class="nf">IsSorted</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The sorted array is: %v\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">strings</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//初始化一个切片，存放string值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">data</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;barry&#34;</span><span class="p">,</span> <span class="s">&#34;quanquan616&#34;</span><span class="p">,</span> <span class="s">&#34;Rita&#34;</span><span class="p">,</span> <span class="s">&#34;rita&#34;</span><span class="p">,</span> <span class="s">&#34;Barry&#34;</span><span class="p">,</span> <span class="s">&#34;sally&#34;</span><span class="p">,</span> <span class="s">&#34;Golang&#34;</span><span class="p">,</span> <span class="s">&#34;Sally&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//将切片转换成StringArray类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">a</span> <span class="o">:=</span> <span class="nx">sort</span><span class="p">.</span><span class="nf">StringArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//StringArray类型也已经实现了Sorter接口的所有方法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//所以a的类型可以被Sorter接口类型所接收
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">sort</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">sort</span><span class="p">.</span><span class="nf">IsSorted</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;The sorted array is: %v\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//根据结构体day中的num进行排序
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">day</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">num</span>       <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">shortName</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">longName</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">dayArray</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">data</span> <span class="p">[]</span><span class="o">*</span><span class="nx">day</span> <span class="c1">//声明data字段的类型为切片，存放day的指针变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//dayArray类型实现Len()方法，接收者为指针类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">dayArray</span><span class="p">)</span> <span class="nf">Len</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//p是一个结构体类型，里面有一个data字段，data字段是一个切片类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//p.data操作是取出那个一整个切片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">dayArray</span><span class="p">)</span> <span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span> <span class="c1">//接收者为指针类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//p.data操作得到了一个切片，既然是切片类型就能使用索引进行取值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">num</span> <span class="p">&lt;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">num</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">dayArray</span><span class="p">)</span> <span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//接收者为指针类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">p</span><span class="p">.</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">days</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Sunday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#34;SUN&#34;</span><span class="p">,</span> <span class="s">&#34;Sunday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Monday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;MON&#34;</span><span class="p">,</span> <span class="s">&#34;Monday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Tuesday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#34;TUE&#34;</span><span class="p">,</span> <span class="s">&#34;Tuesday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Wednesday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#34;WED&#34;</span><span class="p">,</span> <span class="s">&#34;Wednesday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Thursday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#34;THU&#34;</span><span class="p">,</span> <span class="s">&#34;Thursday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Friday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#34;FRI&#34;</span><span class="p">,</span> <span class="s">&#34;Friday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Saturday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#34;SAT&#34;</span><span class="p">,</span> <span class="s">&#34;Saturday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//初始化一个切片，存放day的指针变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//结构体dayArray类型中的data字段的类型为切片，切片中存放的数据类型为day的指针变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">data</span> <span class="o">:=</span> <span class="p">[]</span><span class="o">*</span><span class="nx">day</span><span class="p">{</span><span class="o">&amp;</span><span class="nx">Tuesday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Thursday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Wednesday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Sunday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Monday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Friday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Saturday</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">a</span> <span class="o">:=</span> <span class="nx">dayArray</span><span class="p">{</span><span class="nx">data</span><span class="p">}</span> <span class="c1">//dayArray的数据类型是一个结构体，结构体的语法是大括号&#34;{}&#34;写法
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">sort</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">)</span> <span class="c1">//接收者是指针类型，需要一个合法指向。所以必须取地址，把地址的值传过去
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">sort</span><span class="p">.</span><span class="nf">IsSorted</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;days sort failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">d</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">data</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s &#34;</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">longName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">ints</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">strings</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">days</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="464-最终运行结果">4.6.4 最终运行结果</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="err">运行结果：</span>
</span></span><span class="line"><span class="cl"><span class="nx">The</span> <span class="nx">sorted</span> <span class="nx">array</span> <span class="nx">is</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mi">5467984</span> <span class="o">-</span><span class="mi">784</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">42</span> <span class="mi">59</span> <span class="mi">74</span> <span class="mi">238</span> <span class="mi">905</span> <span class="mi">959</span> <span class="mi">7586</span> <span class="mi">7586</span> <span class="mi">9845</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">The</span> <span class="nx">sorted</span> <span class="nx">array</span> <span class="nx">is</span><span class="p">:</span> <span class="p">[</span><span class="nx">Barry</span> <span class="nx">Golang</span> <span class="nx">Rita</span> <span class="nx">Sally</span> <span class="nx">barry</span> <span class="nx">quanquan616</span> <span class="nx">rita</span> <span class="nx">sally</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">Sunday</span> <span class="nx">Monday</span> <span class="nx">Tuesday</span> <span class="nx">Wednesday</span> <span class="nx">Thursday</span> <span class="nx">Friday</span> <span class="nx">Saturday</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="465-不将-dayarray-声明为结构体的写法">4.6.5 不将 dayArray 声明为结构体的写法</h4>
<p>4.6.3 的代码中，dayArray 是一个结构体类型，里面包含了一个 data 字段，字段类型为一个切片，存放的数据类型是 day 的指针变量。
如果不想使用结构体的话，可以如下写法：（其余代码不改动）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">day</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">num</span>       <span class="kt">int</span>
</span></span><span class="line"><span class="cl">	<span class="nx">shortName</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">longName</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//类型为一个切片，存放的数据类型为day的指针变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">dayArray</span> <span class="p">[]</span><span class="o">*</span><span class="nx">day</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">dayArray</span><span class="p">)</span> <span class="nf">Len</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//dayArray是一个切片了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">)</span> <span class="c1">//接收者是指针类型，因为指针类型存放的是内存地址的值，必须先取出值，才能进行计算
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">dayArray</span><span class="p">)</span> <span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//接收者是指针类型，需要先用星花*运算符取出地址中的值，才能有后续的操作
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">)[</span><span class="nx">i</span><span class="p">].</span><span class="nx">num</span> <span class="p">&lt;</span> <span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">)[</span><span class="nx">j</span><span class="p">].</span><span class="nx">num</span> <span class="c1">//(*p)操作是取出内存地址中的那个一个整个切片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">p</span> <span class="o">*</span><span class="nx">dayArray</span><span class="p">)</span> <span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">)[</span><span class="nx">i</span><span class="p">],</span> <span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">)[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">)[</span><span class="nx">j</span><span class="p">],</span> <span class="p">(</span><span class="o">*</span><span class="nx">p</span><span class="p">)[</span><span class="nx">i</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">days</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Sunday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#34;SUN&#34;</span><span class="p">,</span> <span class="s">&#34;Sunday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Monday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;MON&#34;</span><span class="p">,</span> <span class="s">&#34;Monday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Tuesday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#34;TUE&#34;</span><span class="p">,</span> <span class="s">&#34;Tuesday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Wednesday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#34;WED&#34;</span><span class="p">,</span> <span class="s">&#34;Wednesday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Thursday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="s">&#34;THU&#34;</span><span class="p">,</span> <span class="s">&#34;Thursday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Friday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span> <span class="s">&#34;FRI&#34;</span><span class="p">,</span> <span class="s">&#34;Friday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Saturday</span> <span class="o">:=</span> <span class="nx">day</span><span class="p">{</span><span class="mi">6</span><span class="p">,</span> <span class="s">&#34;SAT&#34;</span><span class="p">,</span> <span class="s">&#34;Saturday&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">data</span> <span class="o">:=</span> <span class="p">[]</span><span class="o">*</span><span class="nx">day</span><span class="p">{</span><span class="o">&amp;</span><span class="nx">Tuesday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Thursday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Wednesday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Sunday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Monday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Friday</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">Saturday</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//dayArray是一个存放day指针变量的切片了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">a</span> <span class="o">:=</span> <span class="nf">dayArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//接收者是指针类型，所以必须传址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">sort</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="p">!</span><span class="nx">sort</span><span class="p">.</span><span class="nf">IsSorted</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;days sort failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">d</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">data</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%s &#34;</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">longName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">days</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">Sunday Monday Tuesday Wednesday Thursday Friday Saturday 
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以看到，运行结果一模一样。
4.6.3 代码中的写法是将切片再次封装成为一个数据类型，通过操作该数据类型中的字段，得到一整个切片，然后再根据下标进行取值。
本例中的写法是声明一个变量，类型为存放指针变量的切片，每次都是直接操作这个变量。</p>
<h4 id="466-参考文献">4.6.6 参考文献</h4>
<p>本节内容均来源于：
原文作者：Go 技术论坛文档：《Go 入门指南（）》
转自链接：https://learnku.com/docs/the-way-to-go/the-first-example-of-117-sorting-using-the-sorter-interface/3653
版权声明：翻译文档著作权归译者和 LearnKu 社区所有。转载请保留原文链接</p>
<h3 id="47-反射包reflect">4.7 反射包<code>reflect</code></h3>
<p>反射可以在运行时检查类型和变量，例如它的大小、方法。
变量的最基本信息是：类型和值。反射包的 <code>Type</code> 用来表示一个类型，反射包的 <code>Value</code> 为值提供了反射接口。</p>
<h4 id="471-最基本的两个函数">4.7.1 最基本的两个函数</h4>
<p><code>reflect.TypeOf()</code>，返回变量的类型。
<code>reflect.ValueOf()</code>，返回变量的值。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="s">```go
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">## 五、类型断言
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">类型查询也叫类型断言，常用的有两种方式：
</span></span></span><span class="line"><span class="cl"><span class="s">1.comma-ok 断言（`</span><span class="k">if</span><span class="s">`）
</span></span></span><span class="line"><span class="cl"><span class="s">2.type-switch 测试（`</span><span class="k">switch</span><span class="s">`）
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">### 5.1 if 实现类型断言
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">被判断的变量必须是一个接口变量，否则编译器会报错：`</span><span class="nx">invalid</span> <span class="kd">type</span> <span class="nx">assertion</span><span class="p">:</span> <span class="nx">varI</span><span class="p">.(</span><span class="nx">T</span><span class="p">)</span> <span class="p">(</span><span class="nx">non</span><span class="o">-</span><span class="kd">interface</span> <span class="kd">type</span> <span class="p">(</span><span class="kd">type</span> <span class="nx">of</span> <span class="nx">varI</span><span class="p">)</span> <span class="nx">on</span> <span class="nx">left</span><span class="p">)</span><span class="s">` 。
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">#### 5.1.1 基本语法
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">`</span><span class="k">if</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">varName</span><span class="p">.(</span><span class="nx">Type</span><span class="p">);</span> <span class="nx">ok</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span><span class="s">`。
</span></span></span><span class="line"><span class="cl"><span class="s">`</span><span class="nx">varName</span><span class="p">.(</span><span class="nx">Type</span><span class="p">)</span><span class="s">` 采用`</span><span class="err">变量名</span><span class="p">.(</span><span class="err">数据类型</span><span class="p">)</span><span class="s">`的方式获取到：该变量的值和该变量是否为指定数据类型的 `</span><span class="kt">bool</span><span class="s">` 值。
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">#### 5.1.2 最基本的使用
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">```</span><span class="k">go</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">varI</span><span class="p">.(</span><span class="nx">T</span><span class="p">);</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果断言成功（varI 是 T 类型），v 是 varI 本身的值，ok 会是布尔值 true。否则 v 是 T 类型的零值，ok 会是布尔值 false，不会造成运行时错误。
注意：varI 需要是一个接口变量。</p>
<h4 id="513-简洁写法">5.1.3 简洁写法</h4>
<p>多数情况下，可能只是想在 if 中测试一下 ok 的值，此时使用下面的写法会显得更加简洁、方便。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">varI</span><span class="p">.(</span><span class="nx">T</span><span class="p">);</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="mi">123</span>
</span></span><span class="line"><span class="cl"><span class="s">```go
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">#### 5.1.4 示例
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">```</span><span class="k">go</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//声明一个长度为3的切片，里面的元素都是空接口。空接口可以接收任意的数据类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">items</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kd">interface</span><span class="p">{},</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">111</span>
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;Golang&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">=</span> <span class="nx">Student</span><span class="p">{</span><span class="s">&#34;xxx&#34;</span><span class="p">,</span> <span class="mi">999</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历，第一个返回元素的下标，第二个返回数据值。这里就是返回接口中的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">data</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">items</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="c1">//data.(int)返回两个值，第一个是该变量本身的值，第二个返回该变量是否为指定数据类型的bool
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">if</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">data</span><span class="p">.(</span><span class="kt">int</span><span class="p">);</span> <span class="nx">ok</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;items[%d] type is int, value=%d\n&#34;</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">data</span><span class="p">.(</span><span class="kt">string</span><span class="p">);</span> <span class="nx">ok</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;items[%d] type is string, value=%s\n&#34;</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">data</span><span class="p">.(</span><span class="nx">Student</span><span class="p">);</span> <span class="nx">ok</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">{</span> <span class="c1">//data这个变量是否为Student类型，Student是自定义的结构体类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;items[%d] type is Student, value=%+v\n&#34;</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">items[0] type is int, value=111
</span></span></span><span class="line"><span class="cl"><span class="cm">items[1] type is string, value=Golang
</span></span></span><span class="line"><span class="cl"><span class="cm">items[2] type is Student, value={name:xxx stuNo:999}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="52-type-switch">5.2 type-switch</h3>
<p>在程序运行时的时候进行类型分析。在处理来自于外部的、类型未知的数据时，比如解析诸如 JSON 或 XML 编码的数据，类型测试和转换会非常有用。</p>
<h4 id="521-基本写法">5.2.1 基本写法</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">switch</span> <span class="nx">t</span> <span class="o">:=</span> <span class="nx">data</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="kd">type</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="kd">type</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意：
1.<code>switch t := data.(type)</code> 这条语句中，<code>type</code> 是关键字的那个<code>type</code>，不要写明数据类型。变量 t 在内存中占据两个字长：一个是其本身的类型，还有一个是其本身的值。
2.<code>case type</code> 语句中的 <code>type</code> 是写明具体的一个数据类型（例如：<code>int</code>, <code>string</code>, <code>StructName</code>），<code>case type</code> 根据 <code>switch</code> 语句中的 t 会去自行匹配。
3.<strong>data.(type) 必须在 switch 中使用，否则就报错</strong>！</p>
<h4 id="522-简洁写法">5.2.2 简洁写法</h4>
<p>如果仅仅只是测试变量的类型，不想用它的值，那么就可以不需要赋值语句。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">switch</span> <span class="nx">areaIntf</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">case</span> <span class="o">*</span><span class="nx">Square</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">case</span> <span class="o">*</span><span class="nx">Circle</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="523-示例1基本示例">5.2.3 示例1：基本示例</h4>
<p>将所有值放入一个切片中，切片的数据类型是空接口。（空接口是万能类型，允许接收任意类型）
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">name</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">stuNo</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//声明一个长度为4的切片，里面的元素都是空接口。空接口可以接收任意的数据类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">items</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kd">interface</span><span class="p">{},</span> <span class="mi">4</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mi">111</span>
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;Golang&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">=</span> <span class="nx">Student</span><span class="p">{</span><span class="s">&#34;xxx&#34;</span><span class="p">,</span> <span class="mi">999</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">items</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">=</span> <span class="kc">false</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//遍历，第一个返回元素的下标，第二个返回数据值。这里就是返回接口中的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">data</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">items</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">switch</span> <span class="nx">data</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//type是关键字，会自行跟下面各个case去匹配
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">case</span> <span class="kt">int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;items[%d] type is int, value=%d\n&#34;</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;items[%d] type is string, value=%s\n&#34;</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="nx">Student</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;items[%d] type is Student, value=%+v\n&#34;</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">bool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;items[%d] type is bool, value=%v\n&#34;</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">items[0] type is int, value=111
</span></span></span><span class="line"><span class="cl"><span class="cm">items[1] type is string, value=Golang
</span></span></span><span class="line"><span class="cl"><span class="cm">items[2] type is Student, value={name:xxx stuNo:999}
</span></span></span><span class="line"><span class="cl"><span class="cm">items[3] type is bool, value=false
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="524-示例2判定每个值的类型">5.2.4 示例2：判定每个值的类型</h4>
<p>给定一些值，根据每个值的实际类型执行不同的动作。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">classifier</span><span class="p">(</span><span class="nx">params</span> <span class="o">...</span><span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">item</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">params</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">switch</span> <span class="nx">t</span> <span class="o">:=</span> <span class="nx">item</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int16</span><span class="p">,</span> <span class="kt">int32</span><span class="p">,</span> <span class="kt">int64</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v is an int type.\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">bool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v is a bool type.\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">float32</span><span class="p">,</span> <span class="kt">float64</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v is a float.\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v is a string.\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kc">nil</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;it&#39;s a nil.\n&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;%v is unknow.\n&#34;</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">classifier</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="o">-</span><span class="mf">14.3</span><span class="p">,</span> <span class="s">&#34;BELGIUM&#34;</span><span class="p">,</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="kc">nil</span><span class="p">,</span> <span class="kc">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">13 is an int type.
</span></span></span><span class="line"><span class="cl"><span class="cm">-14.3 is a float.
</span></span></span><span class="line"><span class="cl"><span class="cm">BELGIUM is a string.
</span></span></span><span class="line"><span class="cl"><span class="cm">%v is unknow.
</span></span></span><span class="line"><span class="cl"><span class="cm"> (1+2i)
</span></span></span><span class="line"><span class="cl"><span class="cm">it&#39;s a nil.
</span></span></span><span class="line"><span class="cl"><span class="cm">false is a bool type.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="525-示例3type-switch-配合匿名函数">5.2.5 示例3：<code>type-switch</code> 配合匿名函数</h4>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">specialString</span> <span class="kt">string</span> <span class="c1">//声明一个自定义类型，其底层类型为string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">whatItThis</span> <span class="nx">specialString</span> <span class="p">=</span> <span class="s">&#34;Hello Golang.&#34;</span> <span class="c1">//自定义类型的底层类型为string，因此可以把字符串复制给它
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">TypeSwitch</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">testFunc</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">any</span> <span class="kd">interface</span><span class="p">{})</span> <span class="p">{</span> <span class="c1">//匿名函数的参数是空接口（万能接口），可以接收任何值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">switch</span> <span class="nx">v</span> <span class="o">:=</span> <span class="nx">any</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//v包含两个字长：一个是类型，另一个是本身的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">case</span> <span class="kt">bool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;v type is bool, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;v type is int, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">float32</span><span class="p">,</span> <span class="kt">float64</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;v type is float, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;v type is string, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="nx">specialString</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;v type is a customize type: specialString, value = %v\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;v type is unkonw&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testFunc</span><span class="p">(</span><span class="nx">whatItThis</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">TypeSwitch</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">v type is a customize type: specialString, value = Hello Golang.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>本例的参考文献：</p>
<blockquote>
<p><a class="link" href="https://learnku.com/docs/the-way-to-go/119-empty-interface/3655"  target="_blank" rel="noopener"
    >https://learnku.com/docs/the-way-to-go/119-empty-interface/3655</a></p>
</blockquote>
<h4 id="526-注意事项">5.2.6 注意事项</h4>
<h5 id="5261-case-语句中列举的类型都必须实现对应的接口">5.2.6.1 case 语句中列举的类型，都必须实现对应的接口</h5>
<p>所有 case 语句中列举的类型（<code>nil</code> 除外）都必须实现对应的接口。如果被检测类型没有在 case 语句列举的类型中，就会执行 default 语句。</p>
<h5 id="5262-在-type-switch-不允许有-fallthrough">5.2.6.2 在 type-switch 不允许有 fallthrough</h5>
<p>可以用 type-switch 进行运行时类型分析，但是在 type-switch 不允许有 fallthrough。</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/golang/">Golang</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/1ypylhrh/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/2y/wallhaven-2y2or6.png" loading="lazy" data-key="1ypylhrh" data-hash="https://w.wallhaven.cc/full/2y/wallhaven-2y2or6.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之并发编程</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/xb9uhh7c/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/gp/wallhaven-gpd95q.png" loading="lazy" data-key="xb9uhh7c" data-hash="https://w.wallhaven.cc/full/gp/wallhaven-gpd95q.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之异常与文本文件处理</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/wknjbadw/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/zy/wallhaven-zy9gwv.png" loading="lazy" data-key="wknjbadw" data-hash="https://w.wallhaven.cc/full/zy/wallhaven-zy9gwv.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之复合类型</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/gryrnn22/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/d6/wallhaven-d6o97j.png" loading="lazy" data-key="gryrnn22" data-hash="https://w.wallhaven.cc/full/d6/wallhaven-d6o97j.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之函数与工程管理</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/nn24jprl/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/kx/wallhaven-kxdz96.jpg" loading="lazy" data-key="nn24jprl" data-hash="https://w.wallhaven.cc/full/kx/wallhaven-kxdz96.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之基本类型与流程控制</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="360rce/blog-comment"
        issue-term="pathname"
        
        label="utterances"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 本博客所有文章除特别声明外，均采用 CC BY-SA 4.0 协议 ，转载请注明出处！
    </section>
    <i class="powerby">
    <span id="busuanzi_container_site_pv">
        访问量&nbsp;-&nbsp;<span id="busuanzi_value_site_pv"></span>
    </span>&nbsp;
    <span id="busuanzi_container_site_uv">
        访客数&nbsp;-&nbsp;<span id="busuanzi_value_site_uv"></span>人次
      </span>
    </i>


</footer>
<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('//cdn.bootcss.com/pangu/4.0.7/pangu.min.js', function() {
      pangu.spacingPage();
    });
</script>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>


    </body>
</html>
