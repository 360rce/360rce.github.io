<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='一、异常处理 1.1 error接口 error接口是Golang内建的接口类型，实现了一个错误处理的标准模式。返回一个不是致命的错误，主要起到一个提示作用。
1.1.1 error接口的基本使用 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import ( &amp;#34;errors&amp;#34; &amp;#34;fmt&amp;#34; ) func main() { //fmt包中的Errorf函数 err1 := fmt.Errorf(&amp;#34;%s&amp;#34;, &amp;#34;this is error1.&amp;#34;) fmt.Printf(&amp;#34;err1 type is : %T, err1=%&#43;v\n&amp;#34;, err1, err1) //errors包中的New()函数 err2 := errors.New(&amp;#34;this is error2.&amp;#34;) fmt.Printf(&amp;#34;err2 type is : %T, err2=%&#43;v\n&amp;#34;, err2, err2) } /* 运行结果： err1 type is : *errors.'>
<title>Golang学习之异常与文本文件处理</title>

<link rel='canonical' href='https://360rce.github.io/p/xb9uhh7c/'>

<link rel="stylesheet" href="/scss/style.min.efe1e773d779dbe0d478a3345bc5ad949fed81363c53bfa8984135f20bf7841d.css"><meta property='og:title' content='Golang学习之异常与文本文件处理'>
<meta property='og:description' content='一、异常处理 1.1 error接口 error接口是Golang内建的接口类型，实现了一个错误处理的标准模式。返回一个不是致命的错误，主要起到一个提示作用。
1.1.1 error接口的基本使用 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import ( &amp;#34;errors&amp;#34; &amp;#34;fmt&amp;#34; ) func main() { //fmt包中的Errorf函数 err1 := fmt.Errorf(&amp;#34;%s&amp;#34;, &amp;#34;this is error1.&amp;#34;) fmt.Printf(&amp;#34;err1 type is : %T, err1=%&#43;v\n&amp;#34;, err1, err1) //errors包中的New()函数 err2 := errors.New(&amp;#34;this is error2.&amp;#34;) fmt.Printf(&amp;#34;err2 type is : %T, err2=%&#43;v\n&amp;#34;, err2, err2) } /* 运行结果： err1 type is : *errors.'>
<meta property='og:url' content='https://360rce.github.io/p/xb9uhh7c/'>
<meta property='og:site_name' content='iceH&#39;s Blog'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Golang' /><meta property='article:published_time' content='2021-01-09T15:45:33&#43;00:00'/><meta property='article:modified_time' content='2021-01-09T15:45:33&#43;00:00'/><meta property='og:image' content='https://w.wallhaven.cc/full/gp/wallhaven-gpd95q.png' />
<meta name="twitter:title" content="Golang学习之异常与文本文件处理">
<meta name="twitter:description" content="一、异常处理 1.1 error接口 error接口是Golang内建的接口类型，实现了一个错误处理的标准模式。返回一个不是致命的错误，主要起到一个提示作用。
1.1.1 error接口的基本使用 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import ( &amp;#34;errors&amp;#34; &amp;#34;fmt&amp;#34; ) func main() { //fmt包中的Errorf函数 err1 := fmt.Errorf(&amp;#34;%s&amp;#34;, &amp;#34;this is error1.&amp;#34;) fmt.Printf(&amp;#34;err1 type is : %T, err1=%&#43;v\n&amp;#34;, err1, err1) //errors包中的New()函数 err2 := errors.New(&amp;#34;this is error2.&amp;#34;) fmt.Printf(&amp;#34;err2 type is : %T, err2=%&#43;v\n&amp;#34;, err2, err2) } /* 运行结果： err1 type is : *errors."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://w.wallhaven.cc/full/gp/wallhaven-gpd95q.png' />
    <link rel="shortcut icon" href="/favicon.ico" />
<style>
    :root {
     
    --sys-font-family: "HarmonyOS_Sans_SC_Medium", Georgia, -apple-system, 'Nimbus Roman No9 L', 'PingFang SC', 'Hiragino Sans GB', 'Noto Serif SC', 'Microsoft Yahei', 'WenQuanYi Micro Hei', 'ST Heiti', sans-serif;
    --code-font-family: "JetBrainsMono Regular", Menlo, Monaco, Consolas, "Courier New";
    --article-font-family: "HarmonyOS_Sans_SC_Medium", var(--base-font-family);
  }
</style>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://npm.elemecdn.com/irithys-cdn@1.0.4/font/font.css";
        customFont.type = "text/css";
        customFont.rel = "stylesheet";
         document.head.appendChild(customFont);
}());
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended">


        <div id="article-toolbar" style="position: sticky;top: 5px;z-index: 1000;">
            <a href="/" class="back-home">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



                <span>返回</span>
            </a>
        </div>
    

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" stroke="currentColor" fill="#BDBDBF"><path d="M512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM176 168V344C176 352.7 180.7 360.7 188.3 364.9C195.8 369.2 205.1 369 212.5 364.5L356.5 276.5C363.6 272.1 368 264.4 368 256C368 247.6 363.6 239.9 356.5 235.5L212.5 147.5C205.1 142.1 195.8 142.8 188.3 147.1C180.7 151.3 176 159.3 176 168V168z"></path></svg>
            
        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#一异常处理">一、异常处理</a>
      <ol>
        <li><a href="#11-error接口">1.1 error接口</a>
          <ol>
            <li><a href="#111-error接口的基本使用">1.1.1 error接口的基本使用</a></li>
            <li><a href="#112-error接口的应用">1.1.2 error接口的应用</a></li>
          </ol>
        </li>
        <li><a href="#12-panic">1.2 panic</a>
          <ol>
            <li><a href="#121-人为引发panic">1.2.1 人为引发panic</a></li>
            <li><a href="#122-内部检测机制自动引发的panic">1.2.2 内部检测机制自动引发的panic</a></li>
          </ol>
        </li>
        <li><a href="#13-recover">1.3 recover</a>
          <ol>
            <li><a href="#131-recover的基本使用">1.3.1 recover的基本使用</a></li>
            <li><a href="#132-recover不能在defer中直接调用">1.3.2 recover不能在defer中直接调用</a></li>
            <li><a href="#133-recover正确的使用方式">1.3.3 recover正确的使用方式</a></li>
            <li><a href="#212-join函数">2.1.2 Join函数</a></li>
            <li><a href="#213-index函数">2.1.3 Index函数</a></li>
            <li><a href="#214-repeat函数">2.1.4 Repeat函数</a></li>
            <li><a href="#215-replace函数">2.1.5 Replace函数</a></li>
            <li><a href="#216-split函数">2.1.6 Split函数</a></li>
            <li><a href="#217-trim函数">2.1.7 Trim函数</a></li>
            <li><a href="#218-fields函数">2.1.8 Fields函数</a></li>
          </ol>
        </li>
        <li><a href="#22-字符串转换">2.2 字符串转换</a>
          <ol>
            <li><a href="#221-append系列">2.2.1 Append系列</a></li>
            <li><a href="#222-format">2.2.2 Format</a></li>
            <li><a href="#223-parse">2.2.3 Parse</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#三正则表达式">三、正则表达式</a>
      <ol>
        <li><a href="#31-正则表达式基本使用">3.1 正则表达式基本使用</a>
          <ol>
            <li><a href="#311-匹配除换行符n之外的任意字符">3.1.1 <code>.</code>匹配除换行符<code>\n</code>之外的任意字符</a></li>
            <li><a href="#312-的使用">3.1.2 <code>[]</code>的使用</a></li>
            <li><a href="#313-匹配前一个字符1次或多次">3.1.3 <code>+</code>匹配前一个字符1次或多次</a></li>
          </ol>
        </li>
        <li><a href="#32-解析html代码的小示例">3.2 解析HTML代码的小示例</a></li>
      </ol>
    </li>
    <li><a href="#四json">四、json</a>
      <ol>
        <li><a href="#41-编码json">4.1 编码json</a>
          <ol>
            <li><a href="#411-使用结构体生成一个json">4.1.1 使用结构体生成一个json</a></li>
            <li><a href="#412-结构体编码json时的二次编码语法">4.1.2 结构体编码json时的二次编码语法</a></li>
            <li><a href="#413-使用map编码json">4.1.3 使用map编码json</a></li>
          </ol>
        </li>
        <li><a href="#42-解码json">4.2 解码json</a>
          <ol>
            <li><a href="#421-解码json到结构体">4.2.1 解码json到结构体</a></li>
            <li><a href="#422-解码json到map">4.2.2 解码json到map</a></li>
            <li><a href="#423-对两种解析方式的简单总结">4.2.3 对两种解析方式的简单总结</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#五文件操作">五、文件操作</a>
      <ol>
        <li><a href="#51-文件分类">5.1 文件分类</a>
          <ol>
            <li><a href="#511-设备文件">5.1.1 设备文件</a></li>
            <li><a href="#512-磁盘文件">5.1.2 磁盘文件</a></li>
          </ol>
        </li>
        <li><a href="#52-文件操作的相关api">5.2 文件操作的相关api</a>
          <ol>
            <li><a href="#521-新建文件">5.2.1 新建文件</a></li>
            <li><a href="#522-打开文件">5.2.2 打开文件</a></li>
            <li><a href="#523-写文件">5.2.3 写文件</a></li>
            <li><a href="#524-读文件">5.2.4 读文件</a></li>
            <li><a href="#525-删除文件">5.2.5 删除文件</a></li>
          </ol>
        </li>
        <li><a href="#53-标准输出设备文件的使用">5.3 标准输出设备文件的使用</a>
          <ol>
            <li><a href="#531-往标准输出设备写内容">5.3.1 往标准输出设备写内容</a></li>
          </ol>
        </li>
        <li><a href="#54-写文件的操作">5.4 写文件的操作</a>
          <ol>
            <li><a href="#541-writestring的使用">5.4.1 <code>WriteString()</code>的使用</a></li>
          </ol>
        </li>
        <li><a href="#55-读文件的操作">5.5 读文件的操作</a>
          <ol>
            <li><a href="#551-read的使用">5.5.1 <code>Read()</code>的使用</a></li>
            <li><a href="#552-readb-bytebyte的长度表示去读取多少个字节">5.5.2 <code>Read(b []byte)</code>，[]byte的长度表示去读取多少个字节</a></li>
            <li><a href="#553-根据文件总大小去读取内容">5.5.3 根据文件总大小去读取内容</a></li>
            <li><a href="#554-osstat-获取文件的元数据信息">5.5.4 <code>os.Stat()</code> 获取文件的元数据信息</a></li>
          </ol>
        </li>
        <li><a href="#56-逐行读取内容">5.6 逐行读取内容</a></li>
        <li><a href="#57-文件案例拷贝文件">5.7 文件案例：拷贝文件</a>
          <ol>
            <li><a href="#571-参考代码">5.7.1 参考代码</a></li>
            <li><a href="#572-bufn表示读多少写多少">5.7.2 buf[:n]，表示读多少写多少</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/xb9uhh7c/">
                
                    <img src="https://w.wallhaven.cc/full/gp/wallhaven-gpd95q.png" loading="lazy" alt="Featured image of post Golang学习之异常与文本文件处理" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%90%B9%E6%A2%A6%E5%88%B0%E8%A5%BF%E5%B7%9E/" >
                吹梦到西州
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/xb9uhh7c/">Golang学习之异常与文本文件处理</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" stroke="currentColor" fill="#BDBDBF"><path d="M326.1 160l127.4-127.4C451.7 32.39 449.9 32 448 32h-86.06l-128 128H326.1zM166.1 160l128-128H201.9l-128 128H166.1zM497.7 56.19L393.9 160H512V96C512 80.87 506.5 67.15 497.7 56.19zM134.1 32H64C28.65 32 0 60.65 0 96v64h6.062L134.1 32zM0 416c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V192H0V416z"></path></svg>
                
                <time class="article-time--published">2021/01/09</time>
            </div>
        

        
            <div>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" stroke="currentColor" fill="#BDBDBF"><path d="M256 512C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256s-114.6 256-256 256zM232 120V256c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2V120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"></path></svg>
                
                <time class="article-time--reading">
                    阅读时长: 21 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="一异常处理">一、异常处理</h2>
<h3 id="11-error接口">1.1 error接口</h3>
<p><code>error</code>接口是Golang内建的接口类型，实现了一个错误处理的标准模式。返回一个不是致命的错误，主要起到一个提示作用。</p>
<h4 id="111-error接口的基本使用">1.1.1 error接口的基本使用</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;errors&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//fmt包中的Errorf函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err1</span> <span class="o">:=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="s">&#34;this is error1.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err1 type is : %T, err1=%+v\n&#34;</span><span class="p">,</span> <span class="nx">err1</span><span class="p">,</span> <span class="nx">err1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//errors包中的New()函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err2</span> <span class="o">:=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;this is error2.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;err2 type is : %T, err2=%+v\n&#34;</span><span class="p">,</span> <span class="nx">err2</span><span class="p">,</span> <span class="nx">err2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">err1 type is : *errors.errorString, err1=this is error1.
</span></span></span><span class="line"><span class="cl"><span class="cm">err2 type is : *errors.errorString, err2=this is error2.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="112-error接口的应用">1.1.2 error接口的应用</h4>
<p><code>error</code>接口一般用于程序发生错误时，给予提示信息的作用：
下例演示：当分母为0时，打印一个提示信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;errors&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">MyDiv</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="nx">result</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//error是接口类型，使用这个接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err</span> <span class="p">=</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">b</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">err</span> <span class="p">=</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;分母不能为0&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">result</span> <span class="p">=</span> <span class="nx">a</span> <span class="o">/</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="o">:=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">j</span> <span class="p">&gt;</span> <span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="nx">j</span><span class="o">--</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">result</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nf">MyDiv</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;error:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;result=&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">result= 5
</span></span></span><span class="line"><span class="cl"><span class="cm">result= 10
</span></span></span><span class="line"><span class="cl"><span class="cm">error: 分母不能为0
</span></span></span><span class="line"><span class="cl"><span class="cm">result= -10
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个<code>error</code>只是打印一个信息，并不是程序报错，所以能够正常运行完成。</p>
<h3 id="12-panic">1.2 panic</h3>
<p>当遇到不可恢复的错误状态的时候，如：数组访问越界、空指针引用等，这些运行时的致命错误，就会引发<code>panic</code>异常。
<strong>当panic异常引发时，程序就会中断运行</strong>。随后，程序崩溃并输出日志信息，日志信息包括<code>panic value</code>和函数调用的堆栈跟踪信息。
不是所有的<code>panic</code>异常都来自运行时（运行时发生了致命错误，程序内部会自动调用<code>panic()</code>函数，让程序中断并崩溃）。直接调用内建的<code>panic()</code>函数也会引发异常（手动引发异常）。<code>panic()</code>函数接收任意值作为参数。</p>
<h4 id="121-人为引发panic">1.2.1 人为引发panic</h4>
<p>手动显式调用<code>panic()</code>函数，就是人为引发的异常，导致程序中断崩溃：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testa</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;aaaaaaaa&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testb</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//显式调用panic函数，引发异常，导致程序中断并且崩溃
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nb">panic</span><span class="p">(</span><span class="s">&#34;this is a panic test.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testc</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;cccccccc&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testa</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testb</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testc</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">aaaaaaaa
</span></span></span><span class="line"><span class="cl"><span class="cm">panic: this is a panic test.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">goroutine 1 [running]:
</span></span></span><span class="line"><span class="cl"><span class="cm">main.testb(...)
</span></span></span><span class="line"><span class="cl"><span class="cm">	F:/goProject/src/myTest/main.go:11
</span></span></span><span class="line"><span class="cl"><span class="cm">main.main()
</span></span></span><span class="line"><span class="cl"><span class="cm">	F:/goProject/src/myTest/main.go:20 +0x9d
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">Process finished with exit code 2
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="122-内部检测机制自动引发的panic">1.2.2 内部检测机制自动引发的panic</h4>
<p>数组访问越界，内部自动引发异常：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testa</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;aaaaaaaa&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testb</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span> <span class="c1">//定义一个长度为2的数组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;testb, i=&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="c1">//当i=2的时候，数组访问越界，内部会自动检测到并引发panic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testc</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;cccccccc&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testa</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testb</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testc</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="13-recover">1.3 recover</h3>
<p><code>recover</code> 是一个专用于&quot;拦截&quot;运行时 <code>panic</code> 的内建函数。当前程序运行时发生了 <code>panic</code>，<code>recover</code> 可以从 <code>panic</code> 的状态中恢复并重新获得流程控制权。简而言之：从 <code>panic</code> 的崩溃处恢复运行程序，它不会引发程序崩溃。
<code>recover</code> 有一个返回值：如果引发了 <code>panic</code>，则返回对应的错误信息；如果未引发 <code>panic</code>，则返回 <code>nil</code>。
<code>recover</code> 必须在 <code>defer</code> 调用的函数中有效。</p>
<h4 id="131-recover的基本使用">1.3.1 recover的基本使用</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testa</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;aaaaaaaa&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testb</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//recover()需要放在defer语句的函数调用中
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//recover有一个返回值：当有panic时，返回对应的错误信息；没有panic时，返回nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nb">recover</span><span class="p">();</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span> <span class="c1">//没有panic时，返回nil。nil != nil 条件不成立，不会进if语句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="c1">//打印错误信息，不要再写recover()了。if初始化语句中已经得到了错误信息并恢复了运行，因为后面没有任何panic的引发，所以再写recover()就会打印出nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}()</span> <span class="c1">//匿名函数调用，满足defer语句中的函数调用，这一条件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span> <span class="c1">//定义一个长度为2的数组
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;testb, i=&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="c1">//当i=2的时候，数组访问越界，内部会自动检测到并引发panic
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">testc</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;cccccccc&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testa</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testb</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nf">testc</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">aaaaaaaa
</span></span></span><span class="line"><span class="cl"><span class="cm">testb, i= 1
</span></span></span><span class="line"><span class="cl"><span class="cm">testb, i= 2
</span></span></span><span class="line"><span class="cl"><span class="cm">runtime error: index out of range [2] with length 2
</span></span></span><span class="line"><span class="cl"><span class="cm">cccccccc
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="132-recover不能在defer中直接调用">1.3.2 recover不能在defer中直接调用</h4>
<p><code>recover</code>不能在<code>defer</code>中直接调用，<code>recover</code>需要在<code>defer</code>调用的函数里才能生效。</p>
<h4 id="133-recover正确的使用方式">1.3.3 recover正确的使用方式</h4>
<p><code>defer</code>后面接一个函数，在函数里写<code>recover()</code>，然后调用这个函数，才能使<code>recover()</code>生效。
例如，打印一下错误信息：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">defer</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">recover</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">}()</span> <span class="c1">//调用匿名函数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="mi">123</span>
</span></span><span class="line"><span class="cl"><span class="err">​</span><span class="s">```go
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">`</span><span class="nb">recover</span><span class="p">()</span><span class="s">`放在匿名函数中，匿名函数当然是一个函数，而且它接着`</span><span class="k">defer</span><span class="s">`语句，最后加了一对小括号`</span><span class="p">()</span><span class="s">`完成对匿名函数的调用。
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">## 二、字符串处理
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">### 2.1 字符串常用操作
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">以下函数都是在`</span><span class="nx">strings</span><span class="s">`包中，使用前必须先导入`</span><span class="nx">strings</span><span class="s">`包！
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">#### 2.1.1 Contains函数
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">语法：`</span><span class="kd">func</span> <span class="nf">Contains</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">substr</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span><span class="s">`，验证字符串s中是否包含了substr。
</span></span></span><span class="line"><span class="cl"><span class="s">完全匹配，一个字符都不能差！
</span></span></span><span class="line"><span class="cl"><span class="s">示例：
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">​```</span><span class="k">go</span>
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="s">&#34;hello,go&#34;</span><span class="p">,</span> <span class="s">&#34;go&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Contains</span><span class="p">(</span><span class="s">&#34;hello,go&#34;</span><span class="p">,</span> <span class="s">&#34;ol&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">true
</span></span></span><span class="line"><span class="cl"><span class="cm">false
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="212-join函数">2.1.2 Join函数</h4>
<p>语法：<code>func Join(a []string, sep string) string</code>，字符串链接，把slice a通过sep链接起来。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="s">&#34;python&#34;</span><span class="p">,</span> <span class="s">&#34;rust&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">newStr</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Join</span><span class="p">(</span><span class="nx">sli</span><span class="p">,</span> <span class="s">&#34;@&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;newStr=&#34;</span><span class="p">,</span> <span class="nx">newStr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">newStr= go@python@rust
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="213-index函数">2.1.3 Index函数</h4>
<p>语法：<code>func Index(s, sep string) int</code>，在字符串s中查找sep的位置，返回sep的下标，找不到返回-1。
完全匹配，一个字符都不能差！返回的是第一个找到的下标！
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;index:&#34;</span><span class="p">,</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="s">&#34;abchehe&#34;</span><span class="p">,</span> <span class="s">&#34;he&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;index:&#34;</span><span class="p">,</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="s">&#34;abchehe&#34;</span><span class="p">,</span> <span class="s">&#34;bd&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">index: 3
</span></span></span><span class="line"><span class="cl"><span class="cm">index: -1
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="214-repeat函数">2.1.4 Repeat函数</h4>
<p>语法：<code>func Repeat(s string, count int) string</code>，重复s字符串count次，返回最终的字符串。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">newStr</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Repeat</span><span class="p">(</span><span class="s">&#34;go&#34;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello,&#34;</span> <span class="o">+</span> <span class="nx">newStr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">hello,gogogo
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="215-replace函数">2.1.5 Replace函数</h4>
<p>语法：<code>func Replace(s, old, new string, n int) string</code>，在字符串s中，把old字符串替换为new字符串。n表示替换的次数，小于0表示全部替换。
如果old为空，则在字符串的开头和每个UTF-8序列之后添加n个new。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="s">&#34;hellogo&#34;</span><span class="p">,</span> <span class="s">&#34;o&#34;</span><span class="p">,</span> <span class="s">&#34;A&#34;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="s">&#34;hellogo&#34;</span><span class="p">,</span> <span class="s">&#34;o&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="s">&#34;hellogo&#34;</span><span class="p">,</span> <span class="s">&#34;o&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="s">&#34;hellogo&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;9&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="s">&#34;hellogo&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;9&#34;</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">strings</span><span class="p">.</span><span class="nf">Replace</span><span class="p">(</span><span class="s">&#34;hellogo&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;9&#34;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="c1">//old为空，n为-1，头部添加new，然后每个UTF-8字符后面再添加new
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">hellAgA
</span></span></span><span class="line"><span class="cl"><span class="cm">hellg
</span></span></span><span class="line"><span class="cl"><span class="cm">hellgo
</span></span></span><span class="line"><span class="cl"><span class="cm">9hellogo
</span></span></span><span class="line"><span class="cl"><span class="cm">9h9e9llogo
</span></span></span><span class="line"><span class="cl"><span class="cm">9h9e9l9l9o9g9o9
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="216-split函数">2.1.6 Split函数</h4>
<p>语法：<code>func Split(s, sep string) []string</code>，把s字符串按照sep分割，返回slice。
大意：将s分割为所有由sep分隔的子字符串，并返回这些分隔符之间的子字符串的一部分。
如果s不包含sep且sep不为空，则Split返回长度为1的切片，其唯一元素为s。
如果sep为空，则Split在每个UTF-8序列之后拆分。
如果s和sep均为空，则Split返回一个空切片。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;strings&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="s">&#34;hello@go@barry&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34;@&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="p">=</span> <span class="s">&#34; 11-22 - 33 &#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34; &#34;</span><span class="p">)</span> <span class="c1">//以空格分割，sep之间有子字符串会被显示出来
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="p">=</span> <span class="s">&#34;a man a plan a&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34;a&#34;</span><span class="p">)</span> <span class="c1">//&#34;a&#34;之间的空格都会被显示出来
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="p">=</span> <span class="s">&#34;Anagod&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34;c&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="p">=</span> <span class="s">&#34;我爱Golangひじょう&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">)</span> <span class="c1">//根据UTF-8分割
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="p">=</span> <span class="s">&#34;&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="p">=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Split</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">[hello go barry]
</span></span></span><span class="line"><span class="cl"><span class="cm">[ 11-22 - 33 ]
</span></span></span><span class="line"><span class="cl"><span class="cm">[  m n   pl n  ]
</span></span></span><span class="line"><span class="cl"><span class="cm">[Anagod]
</span></span></span><span class="line"><span class="cl"><span class="cm">[我 爱 G o l a n g ひ じ ょ う]
</span></span></span><span class="line"><span class="cl"><span class="cm">[]
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl"><span class="o">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="217-trim函数">2.1.7 Trim函数</h4>
<p>语法：<code>func Trim(s string, cutset string) string</code>，去除s字符串头尾的cutset。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="s">&#34;@@@are u ok?@@@&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Trim</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="s">&#34;@&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;sli=%+v\n&#34;</span><span class="p">,</span> <span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">sli=are u ok?
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="218-fields函数">2.1.8 Fields函数</h4>
<p>语法：<code>func Fields(s string) []string</code>，去除字符串s中的空格，返回slice。
<code>Fields</code>和<code>Split</code>很像，<code>Split</code>功能更加强大，它可以指定字符串。<code>Fields</code>不能指定，只能以空格分割。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="s">&#34;     are  @ u  # ok? &#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">sli</span> <span class="o">:=</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Fields</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">sli</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">[are @ u # ok?]
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="22-字符串转换">2.2 字符串转换</h3>
<p>以下函数都是在<code>strconv</code>包中，使用前必须先导入<code>strconv</code>包！</p>
<h4 id="221-append系列">2.2.1 Append系列</h4>
<p><code>strconv.AppendXxxx()</code>，将其他类型转换为字符串后，添加到现有的字节切片中。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//声明一个字节切片，声明切片需要制定len，cap可以省略
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">byteSlice</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//strconv.AppendXxxx()系列都是返回[]byte，需要重新把追加后的新值，赋值给旧的变量，以覆盖旧的变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">byteSlice</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">AppendBool</span><span class="p">(</span><span class="nx">byteSlice</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//第二个写int的值，第三个制定以什么进制去转换这个int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">byteSlice</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">AppendInt</span><span class="p">(</span><span class="nx">byteSlice</span><span class="p">,</span> <span class="mi">123456</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">byteSlice</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">AppendInt</span><span class="p">(</span><span class="nx">byteSlice</span><span class="p">,</span> <span class="mi">123456</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">byteSlice</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">AppendInt</span><span class="p">(</span><span class="nx">byteSlice</span><span class="p">,</span> <span class="mi">123456</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">byteSlice</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">AppendQuote</span><span class="p">(</span><span class="nx">byteSlice</span><span class="p">,</span> <span class="s">&#34;abchellogo&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;byteSlice=&#34;</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">byteSlice</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">byteSlice= true1234561e24011110001001000000&#34;abchellogo&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="222-format">2.2.2 Format</h4>
<p>将其他类型转换为字符串。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">str</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//&#39;f&#39;表示打印的格式。10表示小数精确到几位，-1表示使用最少数量的小数。64表示float64
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">str</span> <span class="o">+=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">FormatFloat</span><span class="p">(</span><span class="mf">3.1415</span><span class="p">,</span> <span class="sc">&#39;f&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span> <span class="c1">//常用的是&#39;f&#39;格式
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">str</span> <span class="o">+=</span> <span class="s">&#34;;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//整型转换为字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">str</span> <span class="o">+=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">Itoa</span><span class="p">(</span><span class="mi">999</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;str=&#34;</span><span class="p">,</span> <span class="nx">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">str= 3.1415000000;999
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>strconv.FormatFloat()</code>的用法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">FormatFloat</span><span class="p">(</span><span class="nx">f</span> <span class="kt">float64</span><span class="p">,</span> <span class="nx">fmt</span> <span class="kt">byte</span><span class="p">,</span> <span class="nx">prec</span><span class="p">,</span> <span class="nx">bitSize</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>函数将浮点数表示为字符串并返回。</p>
<p>bitSize表示f的来源类型（32：float32、64：float64），会据此进行舍入。</p>
<p>fmt表示格式：&lsquo;f&rsquo;（-ddd.dddd）、&lsquo;b&rsquo;（-ddddp±ddd，指数为二进制）、&rsquo;e&rsquo;（-d.dddde±dd，十进制指数）、&lsquo;E&rsquo;（-d.ddddE±dd，十进制指数）、&lsquo;g&rsquo;（指数很大时用&rsquo;e&rsquo;格式，否则&rsquo;f&rsquo;格式）、&lsquo;G&rsquo;（指数很大时用&rsquo;E&rsquo;格式，否则&rsquo;f&rsquo;格式）。</p>
<p>prec控制精度（排除指数部分）：对&rsquo;f&rsquo;、&rsquo;e&rsquo;、&lsquo;E&rsquo;，它表示小数点后的数字个数；对&rsquo;g&rsquo;、&lsquo;G&rsquo;，它控制总的数字个数。如果prec 为-1，则代表使用最少数量的、但又必需的数字来表示f。</p>
<h4 id="223-parse">2.2.3 Parse</h4>
<p>把字符串转换为其他类型。
常用示例1：字符串转换为bool</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">boolValue</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">ParseBool</span><span class="p">(</span><span class="s">&#34;true&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//err=nil的时候，说明没有error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;boolValue=%+v, type is :%T\n&#34;</span><span class="p">,</span> <span class="nx">boolValue</span><span class="p">,</span> <span class="nx">boolValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//bool只有true和false，转换时除了首字母可以大写，其他任何一个字符写错都会返回error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">boolValue</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">ParseBool</span><span class="p">(</span><span class="s">&#34;FalsE&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;boolValue=%+v, type is:%T\n&#34;</span><span class="p">,</span> <span class="nx">boolValue</span><span class="p">,</span> <span class="nx">boolValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">boolValue=true, type is:bool
</span></span></span><span class="line"><span class="cl"><span class="cm">err: strconv.ParseBool: parsing &#34;FalsE&#34;: invalid syntax
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>常用示例2：字符串转换为int</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">intValue</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">Atoi</span><span class="p">(</span><span class="s">&#34;7890&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;intValue=%d, type is:%T\n&#34;</span><span class="p">,</span> <span class="nx">intValue</span><span class="p">,</span> <span class="nx">intValue</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">intValue=7890, type is:int
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="三正则表达式">三、正则表达式</h2>
<p>正则表达式是一种进行<code>模式匹配和文本操纵</code>（按指定的模式提取）的工具。Golang有内建的<code>regexp</code>标准包支持。
Golang实现的是<code>RE2</code>标准，除了<code>\C</code>，详细的语法参考：<a class="link" href="https://github.com/google/re2"  target="_blank" rel="noopener"
    >link</a>
备注：反引号在``Golang中表示原始字符串。
提醒：能用<code>strings</code>包解决的，不要用正则。正则很复杂、很难写，效率也没有<code>strings</code>来得高。
详细使用方式请查看：<a class="link" href="https://studygolang.com/pkgdoc"  target="_blank" rel="noopener"
    >link</a></p>
<h3 id="31-正则表达式基本使用">3.1 正则表达式基本使用</h3>
<p>1.引入<code>regexp</code>包
2.定义一个解析（匹配）规则
3.使用这个规则进行提取</p>
<h4 id="311-匹配除换行符n之外的任意字符">3.1.1 <code>.</code>匹配除换行符<code>\n</code>之外的任意字符</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;regexp&#34;</span> <span class="c1">//第1步：引入包
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="s">&#34;abc   a9z . azc,   apc;arc  &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//第2步：定义解析器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">reg1</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">MustCompile</span><span class="p">(</span><span class="s">`a.c`</span><span class="p">)</span> <span class="c1">//反引号&#34;``&#34;在Golang中表示原始字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">reg1</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span> <span class="c1">//解析成功返回正则解析器，失败返回nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;faild regexp.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="c1">//解析失败就结束函数，不然跳出if语句后，还会继续往下走
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">reg1</span><span class="p">.</span><span class="nf">FindAllStringSubmatch</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//-1表示匹配所有
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;result=&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">result= [[abc] [azc] [apc] [arc]]
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="312-的使用">3.1.2 <code>[]</code>的使用</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;regexp&#34;</span> <span class="c1">//第1步：引入包
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="s">&#34;abc   a9z . azc, a666c  apc;arc  &#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//第2步：定义解析器
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">reg1</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">MustCompile</span><span class="p">(</span><span class="s">`a\d[a-z]`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//reg1 := regexp.MustCompile(`a[0-9][a-z]`) //等价于上一条语句
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">reg1</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span> <span class="c1">//解析成功返回正则解析器，失败返回nil
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;faild regexp.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="c1">//解析失败就结束函数，不然跳出if语句后，还会继续往下走
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//分段方式返回结果
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">reg1</span><span class="p">.</span><span class="nf">FindAllStringSubmatch</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//-1表示匹配所有
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;result=&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">result= [[a9z]]
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="313-匹配前一个字符1次或多次">3.1.3 <code>+</code>匹配前一个字符1次或多次</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;regexp&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">s</span> <span class="o">:=</span> <span class="s">&#34;3333.1414 567 agdsd 1.23 7. 08.99 1sdfasdf 6.66 ; 7.a1&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">reg</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">MustCompile</span><span class="p">(</span><span class="s">`\d+\.\d+`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">reg</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;regexp failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="c1">//解析失败就结束函数，不然跳出if语句后，还会继续往下走
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">reg</span><span class="p">.</span><span class="nf">FindAllString</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;result=&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">result= [3333.1414 1.23 08.99 6.66]
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>&ldquo;08.99&quot;是一个字符串，符合<code>\d</code>的规则，所以是完整显示出来了，并不是人类自己理解的0是无用数。</p>
<h3 id="32-解析html代码的小示例">3.2 解析HTML代码的小示例</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;regexp&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//反引号``，表示原生的字符串
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">s</span> <span class="o">:=</span> <span class="s">`
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;!DOCTYPE html&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;html lang=&#34;zh-CN&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;head&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;title&gt;Go语言标准库文档中文版 | Go语言中文网 | Golang中文社区 | Golang中国&lt;/title&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;meta http-equiv=&#34;X-UA-Compatible&#34; content=&#34;IE=edge, chrome=1&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;meta charset=&#34;utf-8&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;link rel=&#34;shortcut icon&#34; href=&#34;/static/img/go.ico&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;link rel=&#34;apple-touch-icon&#34; type=&#34;image/png&#34; href=&#34;/static/img/logo2.png&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;meta name=&#34;author&#34; content=&#34;polaris &lt;polaris@studygolang.com&gt;&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;meta name=&#34;keywords&#34; content=&#34;中文, 文档, 标准库, Go语言,Golang,Go社区,Go中文社区,Golang中文社区,Go语言社区,Go语言学习,学习Go语言,Go语言学习园地,Golang 中国,Golang中国,Golang China, Go语言论坛, Go语言中文网&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;meta name=&#34;description&#34; content=&#34;Go语言文档中文版，Go语言中文网，中国 Golang 社区，Go语言学习园地，致力于构建完善的 Golang 中文社区，Go语言爱好者的学习家园。分享 Go 语言知识，交流使用经验&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/head&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;div&gt;呵呵&lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;div&gt;哈哈哈&lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;div&gt;f**kf**kf**k&lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;div&gt;呵呵111111111&lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;frameset cols=&#34;15,85&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;frame src=&#34;/static/pkgdoc/i.html&#34;&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;frame name=&#34;main&#34; src=&#34;/static/pkgdoc/main.html&#34; tppabs=&#34;main.html&#34; &gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;noframes&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	&lt;/noframes&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/frameset&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">&lt;/html&gt;
</span></span></span><span class="line"><span class="cl"><span class="s">	`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//(.*)表示分组，我只要小括号中间这一部分的内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//(?s:)表示组命令，s表示匹配换行符`\n`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">reg</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">MustCompile</span><span class="p">(</span><span class="s">`&lt;div&gt;(?s:(.*?))&lt;/div&gt;`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">reg</span> <span class="o">==</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;regexp failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">result</span> <span class="o">:=</span> <span class="nx">reg</span><span class="p">.</span><span class="nf">FindAllStringSubmatch</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//会把 &#34;&lt;div&gt;呵呵&lt;/div&gt;&#34; 和 &#34;呵呵&#34;，都取出来
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;result=&#34;</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;--------------------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//查看一下切片中每个元素的构成情况
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">text</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">result</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;text[0]=%v, text[1]=%v\n&#34;</span><span class="p">,</span> <span class="nx">text</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">text</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;--------------------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//首尾的&lt;div&gt;标签不要，我只想要&lt;div&gt;呵呵&lt;/div&gt;中间的内容 呵呵
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">cleanResult</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">text</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">result</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">cleanResult</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">cleanResult</span><span class="p">,</span> <span class="nx">text</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;cleanResult=&#34;</span><span class="p">,</span> <span class="nx">cleanResult</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">result= [[&lt;div&gt;呵呵&lt;/div&gt; 呵呵] [&lt;div&gt;哈哈哈&lt;/div&gt; 哈哈哈] [&lt;div&gt;f**kf**kf**k&lt;/div&gt; f**kf**kf**k] [&lt;div&gt;呵呵111111111&lt;/div&gt; 呵呵111111111]]
</span></span></span><span class="line"><span class="cl"><span class="cm">--------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="cm">text[0]=&lt;div&gt;呵呵&lt;/div&gt;, text[1]=呵呵
</span></span></span><span class="line"><span class="cl"><span class="cm">text[0]=&lt;div&gt;哈哈哈&lt;/div&gt;, text[1]=哈哈哈
</span></span></span><span class="line"><span class="cl"><span class="cm">text[0]=&lt;div&gt;f**kf**kf**k&lt;/div&gt;, text[1]=f**kf**kf**k
</span></span></span><span class="line"><span class="cl"><span class="cm">text[0]=&lt;div&gt;呵呵111111111&lt;/div&gt;, text[1]=呵呵111111111
</span></span></span><span class="line"><span class="cl"><span class="cm">--------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="cm">cleanResult= [呵呵 哈哈哈 f**kf**kf**k 呵呵111111111]
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="四json">四、json</h2>
<p><code>json</code>（JavaScript Object Notation）比 XML 更轻量级的<code>数据交换格式</code>，被广泛应用于 Web 服务端程序和客户端之间的数据通信。
其表现形式为<strong>键-值对集合的文本描述形式</strong>，跨平台、跨语言的数据交换格式。
Golang有内建的 <code>encoding/json</code> 包，来处理 <code>json</code>。
<code>json</code> 官方网站：<a class="link" href="https://www.json.org/json-zh.html"  target="_blank" rel="noopener"
    >link</a>（这是官方汉化版，英文原版把URL中的zh换成en）
在线格式化：<a class="link" href="https://www.json.cn/"  target="_blank" rel="noopener"
    >link</a></p>
<h3 id="41-编码json">4.1 编码json</h3>
<p>编码 <code>json</code> 就是生成一个 <code>json</code>，将一些信息做成一个 <code>json</code> 文本格式。</p>
<h4 id="411-使用结构体生成一个json">4.1.1 使用结构体生成一个json</h4>
<p><strong>想要生成一个 json，结构体成员的变量名首字母必须大写，否则无法生成</strong>！
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span> <span class="c1">//引入标准包
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Company</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CompanyName</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Deps</span>        <span class="p">[]</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">IsOK</span>        <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Price</span>       <span class="kt">float64</span>
</span></span><span class="line"><span class="cl">	<span class="nx">unit</span>        <span class="kt">string</span> <span class="c1">//成员变量名首字母小写，就不会生成到json中去
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//初始化结构体中的切片成员时，需要制定类型，不然报错：Missing type in composite literal ===&gt; 复合文字中缺少类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">c1</span> <span class="o">:=</span> <span class="nx">Company</span><span class="p">{</span><span class="s">&#34;山景城Google公司&#34;</span><span class="p">,</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;Search Engine&#34;</span><span class="p">,</span> <span class="s">&#34;Andriod&#34;</span><span class="p">,</span> <span class="s">&#34;Google Mail&#34;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="mf">953.37</span><span class="p">,</span> <span class="s">&#34;Dollars&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//编码，格式化编码，根据内容生成json文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">c1Byte</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">MarshalIndent</span><span class="p">(</span><span class="nx">c1</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;\t&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;json marshal failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">c1Byte</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">c1Byte</span><span class="p">))</span> <span class="c1">//Marshal()返回切片字节，字节默认以ASCII码值打印，需要使用string()转换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;type is : %T\n&#34;</span><span class="p">,</span> <span class="nx">c1Byte</span><span class="p">)</span> <span class="c1">//是个uint8的切片类型，byte的底层是用uint8实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">[123 10 9 34 67 111 109 112 97 110 121 78 97 109 101 34 58 32 34 229 177 177 230 153 175 229 159 142 71 111 111 103 108 101 229 133 172 229 143 184 34 44 10 9 34 68 101 112 115 34 58 32 91 10 9 9 34 83 101 97 114 99 104 32 69 110 103 105 110 101 34 44 10 9 9 34 65 110 100 114 105 111 100 34 44 10 9 9 34 71 111 111 103 108 101 32 77 97 105 108 34 10 9 93 44 10 9 34 73 115 79 75 34 58 32 116 114 117 101 44 10 9 34 80 114 105 99 101 34 58 32 57 53 51 46 51 55 10 125]
</span></span></span><span class="line"><span class="cl"><span class="cm">{
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;CompanyName&#34;: &#34;山景城Google公司&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;Deps&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;Search Engine&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;Andriod&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;Google Mail&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">	],
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;IsOK&#34;: true,
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;Price&#34;: 953.37
</span></span></span><span class="line"><span class="cl"><span class="cm">}
</span></span></span><span class="line"><span class="cl"><span class="cm">type is : []uint8
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>结构体成员的变量名首字母必须大写，否则无法生成：</strong>
有没有生成成功可以把生成后的内容复制去<code>json.cn</code>网站上，能够出现正确的内容，则就生成成功了。</p>
<h4 id="412-结构体编码json时的二次编码语法">4.1.2 结构体编码json时的二次编码语法</h4>
<p>在结构体数据类型后面加上：<code>json:&quot;Syntax&quot;</code>。<code>Syntax</code> 为语法格式。
<code>json:&quot;newName&quot;</code>，给这个字段起个别名，最终以这个 newName 的命名为准。
<code>json:&quot;-&quot;</code>，表示不让这个字段输出，相当于不添加到 json 中去。
<code>json:&quot;,string&quot;</code>，表示以字符串格式输出。
注意：<strong>使用结构体生成 json，结构体中的成员变量名的首字母必须大写</strong>！
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Company</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CompanyName</span> <span class="kt">string</span>   <span class="s">`json:&#34;companyName&#34;`</span>  <span class="c1">//二次编码，最终会以这个二次编码的字段名companyName为准
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Deps</span>        <span class="p">[]</span><span class="kt">string</span> <span class="s">`json:&#34;departments&#34;`</span>  <span class="c1">//就相当于起个别名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">IsOK</span>        <span class="kt">bool</span>     <span class="s">`json:&#34;-&#34;`</span>            <span class="c1">//-表示这个字段不会输出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Price</span>       <span class="kt">float64</span>  <span class="s">`json:&#34;price,string&#34;`</span> <span class="c1">//指定以字符串格式输出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Unit</span>        <span class="kt">string</span>   <span class="s">`json:&#34;moneyUnit&#34;`</span>    <span class="c1">//如果成员变量名首字母还是小写，依然还是不会生成到json中去
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//初始化结构体中的切片成员时，需要制定类型，不然报错：Missing type in composite literal ===&gt; 复合文字中缺少类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">c1</span> <span class="o">:=</span> <span class="nx">Company</span><span class="p">{</span><span class="s">&#34;山景城Google公司&#34;</span><span class="p">,</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;Search Engine&#34;</span><span class="p">,</span> <span class="s">&#34;Andriod&#34;</span><span class="p">,</span> <span class="s">&#34;GMail&#34;</span><span class="p">},</span> <span class="kc">true</span><span class="p">,</span> <span class="mf">953.37</span><span class="p">,</span> <span class="s">&#34;Dollars&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//编码，格式化编码，根据内容生成json文本
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">c1Byte</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">MarshalIndent</span><span class="p">(</span><span class="nx">c1</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;\t&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;json marshal failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">c1Byte</span><span class="p">))</span>          <span class="c1">//Marshal()返回切片字节，字节默认以ASCII码值打印，需要使用string()转换
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;type is : %T\n&#34;</span><span class="p">,</span> <span class="nx">c1Byte</span><span class="p">)</span> <span class="c1">//是个uint8的切片类型，byte的底层是用uint8实现
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">{
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;companyName&#34;: &#34;山景城Google公司&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;departments&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;Search Engine&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;Andriod&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;GMail&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">	],
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;price&#34;: &#34;953.37&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;moneyUnit&#34;: &#34;Dollars&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">}
</span></span></span><span class="line"><span class="cl"><span class="cm">type is : []uint8
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="413-使用map编码json">4.1.3 使用map编码json</h4>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//json中的值可能会有各种类型，解决这一问题：声明一个能够接收任意类型的万能空接口
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;companyName&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;山景城Google公司&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;departments&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;Search Engine&#34;</span><span class="p">,</span> <span class="s">&#34;Andriod&#34;</span><span class="p">,</span> <span class="s">&#34;GMail&#34;</span><span class="p">}</span> <span class="c1">//切片需要指明类型
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;IsOK&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;price&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="mf">953.37</span>
</span></span><span class="line"><span class="cl">	<span class="nx">m</span><span class="p">[</span><span class="s">&#34;moneyUnit&#34;</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;Dollars&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//编码成json
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">mByte</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">MarshalIndent</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;\t&#34;</span><span class="p">)</span> <span class="c1">//按一定的格式输出json
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;json marshal failed.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">mByte</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">{
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;IsOK&#34;: true,
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;companyName&#34;: &#34;山景城Google公司&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;departments&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;Search Engine&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;Andriod&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">		&#34;GMail&#34;
</span></span></span><span class="line"><span class="cl"><span class="cm">	],
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;moneyUnit&#34;: &#34;Dollars&#34;,
</span></span></span><span class="line"><span class="cl"><span class="cm">	&#34;price&#34;: 953.37
</span></span></span><span class="line"><span class="cl"><span class="cm">}
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="42-解码json">4.2 解码json</h3>
<p>解析一个 <code>json</code> 就是编码的反过程：已经有了一个现成的 <code>json</code>，从中提取出信息，并保存到结构体或者 <code>map</code>。</p>
<h4 id="421-解码json到结构体">4.2.1 解码json到结构体</h4>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Company</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">CompanyName</span> <span class="kt">string</span>   <span class="s">`json:&#34;companyName&#34;`</span> <span class="c1">//二次编码，起个别名。是为了跟原生json中的键名保持一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Deps</span>        <span class="p">[]</span><span class="kt">string</span> <span class="s">`json:&#34;departments&#34;`</span> <span class="c1">//二次编码，起个别名。是为了跟原生json中的键名保持一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">IsOK</span>        <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Price</span>       <span class="kt">float64</span> <span class="s">`json:&#34;price&#34;`</span> <span class="c1">//二次编码，起个别名。是为了跟原生json中的键名保持一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">Unit</span>        <span class="kt">string</span>  <span class="s">`json:&#34;moneyUnit&#34;`</span> <span class="c1">//二次编码，起个别名。是为了跟原生json中的键名保持一致
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">jsonBuf</span> <span class="o">:=</span> <span class="s">`
</span></span></span><span class="line"><span class="cl"><span class="s">{
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;IsOK&#34;: true,
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;companyName&#34;: &#34;山景城Google公司&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;departments&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s">		&#34;Search Engine&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">		&#34;Andriod&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">		&#34;GMail&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">	],
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;moneyUnit&#34;: &#34;Dollars&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;price&#34;: 953.37
</span></span></span><span class="line"><span class="cl"><span class="s">}
</span></span></span><span class="line"><span class="cl"><span class="s">	`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//1.字段全部解析
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">c1</span> <span class="nx">Company</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//jsonBuf解析到c1中去。要修改结构体中的值，需要引用传递。第二个参数必须要地址传递
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">jsonBuf</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">c1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Unmarshal failed, error:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;c1 = %+v, type is : %T\n&#34;</span><span class="p">,</span> <span class="nx">c1</span><span class="p">,</span> <span class="nx">c1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//2.只解析某几个字段
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//重新声明一个结构体，写上想要的那几个字段。最终只会解码指定的这几个字段。注意：数据类型和名称依然要完全统一
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">type</span> <span class="nx">SimpleCompany</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">CompanyName</span> <span class="kt">string</span>   <span class="s">`json:&#34;companyName&#34;`</span>
</span></span><span class="line"><span class="cl">		<span class="nx">Deps</span>        <span class="p">[]</span><span class="kt">string</span> <span class="s">`json:&#34;departments&#34;`</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">c2</span> <span class="nx">SimpleCompany</span> <span class="c1">//声明这个新定义的结构体的变量
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//jsonBuf解析到c2中去。要修改结构体中的值，需要引用传递。第二个参数必须要地址传递
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err</span> <span class="p">=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">jsonBuf</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">c2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;Unmarshal failed, error:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;c2 = %+v, type is : %T\n&#34;</span><span class="p">,</span> <span class="nx">c2</span><span class="p">,</span> <span class="nx">c2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">c1 = {CompanyName:山景城Google公司 Deps:[Search Engine Andriod GMail] IsOK:true Price:953.37 Unit:Dollars}, type is : main.Company
</span></span></span><span class="line"><span class="cl"><span class="cm">c2 = {CompanyName:山景城Google公司 Deps:[Search Engine Andriod GMail]}, type is : main.SimpleCompany
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意事项：
1.原本 json 中的字段名称是什么，结构体中也必须完全一样跟着写。但结构体中的变量名首字母必须大写，所以要用到二次编码格式。二次编码，起个别名，是为了让结构体中的字段名称与原生json中的键名保持一致。
2.<code>Unmarshal()</code> 函数是把第一个 json 文本的 byte 数据写入到第二个结构体变量中去。想要修改结构体中的值，就需要取结构体的地址。<strong>需要地址传递</strong>！</p>
<h4 id="422-解码json到map">4.2.2 解码json到map</h4>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">jsonBuf</span> <span class="o">:=</span> <span class="s">`
</span></span></span><span class="line"><span class="cl"><span class="s">{
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;IsOK&#34;: true,
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;companyName&#34;: &#34;山景城Google公司&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;departments&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s">		&#34;Search Engine&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">		&#34;Andriod&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">		&#34;GMail&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">	],
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;moneyUnit&#34;: &#34;Dollars&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">	&#34;price&#34;: 953.37
</span></span></span><span class="line"><span class="cl"><span class="s">}
</span></span></span><span class="line"><span class="cl"><span class="s">	`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//创建一个map
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">jsonBuf</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">m</span><span class="p">)</span> <span class="c1">//第二个参数必须传内存地址
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;json unmarshal failed. err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%+v\n&#34;</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;---------------------------------------------------------------&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//想要从map中取值，就需要类型断言，一步步反推才能使用
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//想要值到每一个内容，就必须通过for迭代，一个个类型断言反推，才能拿到值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">companyName</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">isOK</span> <span class="kt">bool</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">price</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">moneyUnit</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">departments</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">m</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">switch</span> <span class="nx">data</span> <span class="o">:=</span> <span class="nx">value</span><span class="p">.(</span><span class="kd">type</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//value.(type)用来匹配下列case的各个数据类型；data是返回过来的值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">case</span> <span class="kt">string</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//要取到对应键中的内容，则需要进一步处理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="k">switch</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="nx">key</span> <span class="o">==</span> <span class="s">&#34;companyName&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="nx">companyName</span> <span class="p">=</span> <span class="nx">data</span>
</span></span><span class="line"><span class="cl">			<span class="k">case</span> <span class="nx">key</span> <span class="o">==</span> <span class="s">&#34;moneyUnit&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">				<span class="nx">moneyUnit</span> <span class="p">=</span> <span class="nx">data</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;data type is string. key[%s]=%s\n&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">bool</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">key</span> <span class="o">==</span> <span class="s">&#34;IsOK&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">isOK</span> <span class="p">=</span> <span class="nx">data</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;data type is bool, key[%s]=%v\n&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="kt">float64</span><span class="p">:</span> <span class="c1">//浮点型用float64才能匹配到
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="k">if</span> <span class="nx">key</span> <span class="o">==</span> <span class="s">&#34;price&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">price</span> <span class="p">=</span> <span class="nx">data</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;data type is float64, key[%s]=%f\n&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">case</span> <span class="p">[]</span><span class="kd">interface</span><span class="p">{}:</span> <span class="c1">//如果value本身是一个切片，需要用空接口（万能类型）来匹配
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;data type is []interface{}, key[%s]=%+v\n&#34;</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="c1">//如果要在切片中取值，则需要进一步地迭代，一个个取出来，一个个处理
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>			<span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">v</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">data</span> <span class="p">{</span> <span class="c1">//取出切片中，每个元素的下标和值
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="k">if</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">v</span><span class="p">.(</span><span class="kt">string</span><span class="p">);</span> <span class="nx">ok</span> <span class="p">{</span> <span class="c1">//判断这个值是否为string类型，是返回true，否返回false
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>					<span class="nx">departments</span> <span class="o">+=</span> <span class="nx">s</span> <span class="o">+</span> <span class="s">&#34;;&#34;</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;companyName=%s; departments=%s; isOK=%v; price=%f; moneyUnit=%s\n&#34;</span><span class="p">,</span> <span class="nx">companyName</span><span class="p">,</span> <span class="nx">departments</span><span class="p">,</span> <span class="nx">isOK</span><span class="p">,</span> <span class="nx">price</span><span class="p">,</span> <span class="nx">moneyUnit</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">map[IsOK:true companyName:山景城Google公司 departments:[Search Engine Andriod GMail] moneyUnit:Dollars price:953.37]
</span></span></span><span class="line"><span class="cl"><span class="cm">---------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="cm">data type is bool, key[IsOK]=true
</span></span></span><span class="line"><span class="cl"><span class="cm">data type is string. key[companyName]=山景城Google公司
</span></span></span><span class="line"><span class="cl"><span class="cm">data type is []interface{}, key[departments]=[Search Engine Andriod GMail]
</span></span></span><span class="line"><span class="cl"><span class="cm">data type is string. key[moneyUnit]=Dollars
</span></span></span><span class="line"><span class="cl"><span class="cm">data type is float64, key[price]=953.370000
</span></span></span><span class="line"><span class="cl"><span class="cm">companyName=山景城Google公司; departments=Search Engine;Andriod;GMail;; isOK=true; price=953.370000; moneyUnit=Dollars
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="423-对两种解析方式的简单总结">4.2.3 对两种解析方式的简单总结</h4>
<p>解析到 <code>map</code>，只是定义 <code>map</code> 那一段写起来很方便，想要取出里面的值，则需要迭代每一个元素，然后对每一个元素进行类型断言，反推每个数据类型。每个数据类型再单独进行处理。
解析到结构体，只是定义结构体的时候比较麻烦，需要指定每个字段的数据类型，二次编码的名称要跟原生的 json 文本中的键名一样。但是，一次定义就可以把所有的内容都解析进去，后续只需要<code>结构体名称.字段名</code>（<code>structVarName.fieldName</code>）操作即可。</p>
<h2 id="五文件操作">五、文件操作</h2>
<p>Golang 有内建的 <code>os</code> 文件操作包。</p>
<h3 id="51-文件分类">5.1 文件分类</h3>
<h4 id="511-设备文件">5.1.1 设备文件</h4>
<p>平时最常用的有：</p>
<ul>
<li>屏幕（标准输出设备）
最常用的一个函数：<code>fmt.Println()</code>，往标准输出设备写内容。</li>
<li>键盘（标准输入设备）
<code>fmt.Scan()</code>，从标准输入设备读取内容。</li>
</ul>
<h4 id="512-磁盘文件">5.1.2 磁盘文件</h4>
<p>放在存储设备上的文件。
还可以分为两类：</p>
<ul>
<li>文本文件：能够用记事本（Notpad++）打开，且不是乱码的就是文本文件。</li>
<li>二进制文件：用记事本打开后，看到乱码的就是二进制文件。</li>
</ul>
<h3 id="52-文件操作的相关api">5.2 文件操作的相关api</h3>
<h4 id="521-新建文件">5.2.1 新建文件</h4>
<p>如果文件不存在则新建，如果<strong>文件已存在则会清空原文件</strong>。
第1种方式：<code>func Create(name string) (file *File, err Error)</code>，根据提供的文件名（或路径+文件名）创建新的文件，返回一个可读可写的文件指针，默认权限是 <code>0666</code>。内部调用的是 <code>OpenFile()</code>。
第2种方式：<code>func New(fd uintptr, name string) *File</code>，根据文件描述符创建相应的文件，返回一个文件指针。</p>
<h4 id="522-打开文件">5.2.2 打开文件</h4>
<p>第1种方式：<code>func Open(name string) (file *File, err Error)</code>，以<strong>只读</strong>方式打开一个名称为 name 的文件。内部实现调用了<code>OpenFile()</code>。
第2种方式：<code>func OpenFile(name string, flag int, perm uint32) (file *File, err Error)</code>，打开名称为name的文件，flag是打开的方式（如：只读、只写等），perm是权限。</p>
<h4 id="523-写文件">5.2.3 写文件</h4>
<p>第1种方式：<code>func (file *File) Write(b []byte) (n int, err Error)</code>，写入byte到文件。可处理二进制和非二进制文件。
第2种方式：<code>func (file *File) WriteAt(b []byte, off int64) (n int, err Error)</code>，从off位置开始写入byte。
第3种方式：<code>func (file *File) WriteString(s string) (ret int, err Error)</code>，写入string到文件。只能处理文本文件（非二进制文件），它只会往里面写字符串。</p>
<h4 id="524-读文件">5.2.4 读文件</h4>
<p>第1种方式：<code>func (file *File) Read(b []byte) (n int, err Error)</code>，读取数据到byte切片中。
第2种方式：<code>func (file *File) ReadAt(b []byte, off int64) (n int, err Error)</code>，从off位置开始读取数据到byte切片中。</p>
<h4 id="525-删除文件">5.2.5 删除文件</h4>
<p>第1种方式：<code>func Remove(name string) Error</code>，删除文件名为name的文件。</p>
<h3 id="53-标准输出设备文件的使用">5.3 标准输出设备文件的使用</h3>
<h4 id="531-往标准输出设备写内容">5.3.1 往标准输出设备写内容</h4>
<p>标准输出设备通常指的是屏幕，Golang 默认是往屏幕写内容。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello world.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">os</span><span class="p">.</span><span class="nx">Stdout</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span> <span class="c1">//把输出设备给关了，关闭文件后，无法再输出
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;hello go.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">hello world.
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">Process finished with exit code 0
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>还可以使用 <code>os.Stdout.WriteString(s string)</code> 往设备输出内容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">os</span><span class="p">.</span><span class="nx">Stdout</span><span class="p">.</span><span class="nf">WriteString</span><span class="p">(</span><span class="s">&#34;hello world.\n&#34;</span><span class="p">)</span> <span class="c1">//需手动换行
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">words</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">,</span> <span class="sc">&#39;\t&#39;</span><span class="p">,</span> <span class="sc">&#39;i&#39;</span><span class="p">,</span> <span class="sc">&#39;o&#39;</span><span class="p">,</span> <span class="sc">&#39;\t&#39;</span><span class="p">,</span> <span class="sc">&#39;u&#39;</span><span class="p">,</span> <span class="sc">&#39;\n&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">os</span><span class="p">.</span><span class="nx">Stdout</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">words</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">words</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">hello world.
</span></span></span><span class="line"><span class="cl"><span class="cm">ae	io	u
</span></span></span><span class="line"><span class="cl"><span class="cm">[97 101 9 105 111 9 117 10]
</span></span></span><span class="line"><span class="cl"><span class="cm">
</span></span></span><span class="line"><span class="cl"><span class="cm">Process finished with exit code 0
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="54-写文件的操作">5.4 写文件的操作</h3>
<h4 id="541-writestring的使用">5.4.1 <code>WriteString()</code>的使用</h4>
<p>示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">WriteFile</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//1.打开文件（新建文件）
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;create file failed. err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="c1">//有错误就结束函数，不让它往下走了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//使用完毕，必须关闭文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">defer</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span> <span class="c1">//函数调用完毕，即表示文件使用完毕了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//2.往里面写内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">s</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">s</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;这是第%d行！\n&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">n</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">WriteString</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;write %d line err:%+v\n&#34;</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;wrote %d words.\n&#34;</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="c1">//以byte类型来计算长度
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">path</span> <span class="o">:=</span> <span class="s">&#34;./demo.txt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WriteFile</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">wrote 17 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="55-读文件的操作">5.5 读文件的操作</h3>
<h4 id="551-read的使用">5.5.1 <code>Read()</code>的使用</h4>
<p>直接使用已在5.4.1示例中生成的demo.txt。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ReadFile</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//1.打开文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;open file failed. err=&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//使用完毕，关闭文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">defer</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//2.读取内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">buf</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="mi">2048</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="c1">//Read([]byte)中的参数需要是一个byte类型的切片
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">n</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span> <span class="c1">//n表示实际一共读取了多少字节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//EOF:end of file，表示文件的正常结束。文件已经正常结束了，说明整个文件都读取完整了。
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//既然整个文件都读取完整了，并且正常结束了，那么何来的错误？
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//EOF是表示文件正常结束，而不是错误。所以需要再判断一下，错误并不是EOF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="o">&amp;&amp;</span> <span class="nx">err</span> <span class="o">!=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;read content failed. err=&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;has read %d words.\n&#34;</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">buf</span><span class="p">[:</span><span class="nx">n</span><span class="p">]))</span> <span class="c1">//[:n]指定取多少个字节。如果说读取了很多字节，但实际上没有那么多字节。剩下的都会以空字符形式来表现，显示上不够友好
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">path</span> <span class="o">:=</span> <span class="s">&#34;./demo.txt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nf">ReadFile</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">has read 170 words.
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第0行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第1行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第2行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第3行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第4行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第5行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第6行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第7行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第8行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第9行！
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="552-readb-bytebyte的长度表示去读取多少个字节">5.5.2 <code>Read(b []byte)</code>，[]byte的长度表示去读取多少个字节</h4>
<p>上例中，声明切片时，长度指定了 2048 个字节。那么就表示，去文件中读取 2048 个字节。
下图这个反面教材中的指定了切片长度为 0，那么就表示，去文件中读取 0 个字节。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">buf</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>	<span class="c1">//这个切片长度是为了给后面的Read()。指定多少长度，就去读取多少个字节。长度指定0，表示去读取0个字节！读取0个字节，就等于什么都不去读取。
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>指定了只读取 90 个字节，那么程序只会去读取 90 个字节，剩下的内容都不会去读取。</p>
<p>指定去读取 999 个字节，但文件中只有 170 个字节。指定的读取数量超过了文件中的总内容，那么剩余的每一个字节就会以空字符来显示。</p>
<h4 id="553-根据文件总大小去读取内容">5.5.3 根据文件总大小去读取内容</h4>
<p>既然大了也不是，小了也不行。那么就先得到这个文件的总大小，然后指定这个总大小的数字去读取内容。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ReadFile</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;open file failed. err=&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	
</span></span><span class="line"><span class="cl">	<span class="c1">//尝试获取文件的大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="c1">//f.Stat()返回一个接口，FileInfo类型中有一个Size()的方法可以获取到文件的总大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fi</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Stat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="o">&amp;&amp;</span> <span class="nx">err</span> <span class="o">!=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;get file stat failed. err=&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fsize</span> <span class="o">:=</span> <span class="nx">fi</span><span class="p">.</span><span class="nf">Size</span><span class="p">()</span> <span class="c1">//获取到文件的总大小
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;this file size is :&#34;</span><span class="p">,</span> <span class="nx">fsize</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span> <span class="c1">//使用完毕，关闭文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="nx">buf</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="nx">fsize</span><span class="p">)</span> <span class="c1">//文件总大小有多少，那么就指定去读取多少
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">n</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="o">&amp;&amp;</span> <span class="nx">err</span> <span class="o">!=</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;read content failed. err=&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;has read %d bytes.\n&#34;</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">string</span><span class="p">(</span><span class="nx">buf</span><span class="p">))</span> <span class="c1">//不用再写[:n]了，因为已经读取了跟文件总大小完全匹配的全部内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">path</span> <span class="o">:=</span> <span class="s">&#34;./demo.txt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="nf">ReadFile</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">this file size is : 170
</span></span></span><span class="line"><span class="cl"><span class="cm">has read 170 bytes.
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第0行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第1行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第2行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第3行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第4行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第5行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第6行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第7行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第8行！
</span></span></span><span class="line"><span class="cl"><span class="cm">这是第9行！
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>注意：获取文件总大小并按这个长度去读取，属于一次性读取整个文件中的内容。小文本可以这么使用，但是大文本这么全部读取到内存中，会占用比较大的内存资源从而导致影响性能。
该解决方案从这里看来的：<a class="link" href="https://stackoverflow.com/questions/17133590/how-to-get-file-length-in-go"  target="_blank" rel="noopener"
    >link</a></p>
<h4 id="554-osstat-获取文件的元数据信息">5.5.4 <code>os.Stat()</code> 获取文件的元数据信息</h4>
<p>上面的案例中，因为需要读取出文件中的内容。所以采用的策略是：先打开这个文件，有了这个文件指针后，通过这个指针变量去获取该文件的元数据信息。
如果只想要获取文件的元数据信息，而不打开文件，就可以使用 <code>os.State()</code> 方法。它可以在不打开文件的情况下，获取到文件的元数据信息。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fi</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Stat</span><span class="p">(</span><span class="s">&#34;1.mp4&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;file name:&#34;</span><span class="p">,</span> <span class="nx">fi</span><span class="p">.</span><span class="nf">Name</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;file size:&#34;</span><span class="p">,</span> <span class="nx">fi</span><span class="p">.</span><span class="nf">Size</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;is dir?&#34;</span><span class="p">,</span> <span class="nx">fi</span><span class="p">.</span><span class="nf">IsDir</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;file mode:&#34;</span><span class="p">,</span> <span class="nx">fi</span><span class="p">.</span><span class="nf">Mode</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;file modTime:&#34;</span><span class="p">,</span> <span class="nx">fi</span><span class="p">.</span><span class="nf">ModTime</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">file name: 1.mp4
</span></span></span><span class="line"><span class="cl"><span class="cm">file size: 8021539
</span></span></span><span class="line"><span class="cl"><span class="cm">is dir? false
</span></span></span><span class="line"><span class="cl"><span class="cm">file mode: -rw-rw-rw-
</span></span></span><span class="line"><span class="cl"><span class="cm">file modTime: 2020-09-13 18:14:06.889 +0800 CST
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="56-逐行读取内容">5.6 逐行读取内容</h3>
<p>需要借助 Golang 内建包 <code>bufio</code>，它是带缓存的 I/O。
示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;bufio&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">ReadFileByLine</span><span class="p">(</span><span class="nx">path</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">f</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;open file failed. err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">f</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//新建一个缓冲区，把内容先放在缓冲区
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">r</span> <span class="o">:=</span> <span class="nx">bufio</span><span class="p">.</span><span class="nf">NewReader</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="c1">//遇到&#39;\n&#39;结束读取，但&#39;\n&#39;同时也被读取了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="nx">buf</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nf">ReadBytes</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span> <span class="c1">//文件已正常结束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="k">break</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">				<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;read bytes err:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;buf = #%s#&#34;</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">buf</span><span class="p">))</span> <span class="c1">//井号前后都没有加过换行符，但是ReadBytes()会把指定的字符也给读取了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">path</span> <span class="o">:=</span> <span class="s">&#34;./demo.txt&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nf">ReadFileByLine</span><span class="p">(</span><span class="nx">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">运行结果：
</span></span></span><span class="line"><span class="cl"><span class="cm">buf = #这是第0行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第1行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第2行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第3行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第4行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第5行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第6行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第7行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第8行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#buf = #这是第9行！
</span></span></span><span class="line"><span class="cl"><span class="cm">#
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="57-文件案例拷贝文件">5.7 文件案例：拷贝文件</h3>
<p><code>Read()</code> 读取，<code>Write()</code> 写入。
设计思路：使用命令行实现功能。</p>
<h4 id="571-参考代码">5.7.1 参考代码</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//获取命令行参数
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetCMDArgs</span><span class="p">()</span> <span class="p">[]</span><span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">cmdArry</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nx">Args</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">cmdArry</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;command line error. except: binaryName.exe srcFileName dstFileName&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">cmdArry</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//获取文件名，分别是源文件名和目标文件名
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetFilenames</span><span class="p">(</span><span class="nx">cmdArry</span> <span class="p">[]</span><span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">srcFileName</span><span class="p">,</span> <span class="nx">dstFileName</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">srcFileName</span> <span class="p">=</span> <span class="nx">cmdArry</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="nx">dstFileName</span> <span class="p">=</span> <span class="nx">cmdArry</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">srcFileName</span> <span class="o">==</span> <span class="nx">dstFileName</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;The destination file name cannot be the same as the source file name.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">return</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//核心功能，实现文件的拷贝
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">ExecuteCopy</span><span class="p">(</span><span class="nx">srcFileName</span><span class="p">,</span> <span class="nx">dstFileName</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">buf</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="mi">1024</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span> <span class="c1">//切片缓冲区，以多少个字节去读取文件中的内容。1024Byte = 1KB
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//打开源文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">srcF</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Open</span><span class="p">(</span><span class="nx">srcFileName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;open source file failed. error:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">srcF</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span> <span class="c1">//关闭文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="c1">//创建目标文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">dstF</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Create</span><span class="p">(</span><span class="nx">dstFileName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;create destination file failed. error:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">os</span><span class="p">.</span><span class="nf">Exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">defer</span> <span class="nx">dstF</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span> <span class="c1">//关闭文件
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">	<span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">n</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">srcF</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span> <span class="c1">//文件已到末尾，正常结束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="k">break</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">dstF</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">buf</span><span class="p">[:</span><span class="nx">n</span><span class="p">])</span> <span class="c1">//buf[:n]表示读多少写多少，到了最后的时候，往往读不全指定的字节数据量。如果还是写死为buf，超出部分将会是空字节内容
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">cmdArry</span> <span class="o">:=</span> <span class="nf">GetCMDArgs</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">srcFileName</span><span class="p">,</span> <span class="nx">dstFileName</span> <span class="o">:=</span> <span class="nf">GetFilenames</span><span class="p">(</span><span class="nx">cmdArry</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nf">ExecuteCopy</span><span class="p">(</span><span class="nx">srcFileName</span><span class="p">,</span> <span class="nx">dstFileName</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="572-bufn表示读多少写多少">5.7.2 buf[:n]，表示读多少写多少</h4>
<p>5.7.1 示例代码中，ExecuteCopy() 函数的倒数第二行代码：dstF.Write(buf[:n])。它表示读取到多少内容，就写入多少内容。
这个 buf 是可以自行指定，每次读取多少个字节。</p>
<h5 id="5721-不采用读多少写多少模式所引发的问题">5.7.2.1 不采用读多少写多少模式所引发的问题</h5>
<p>修改 for 循环中的代码，抛弃读多少写多少的模式，指定了每次就是一股脑地往目标文件中写入 1024*5 个字节：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="k">for</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">srcF</span><span class="p">.</span><span class="nf">Read</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span> <span class="c1">// [:n] 被抛弃了
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>		<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span> <span class="nx">err</span> <span class="o">==</span> <span class="nx">io</span><span class="p">.</span><span class="nx">EOF</span> <span class="p">{</span> <span class="c1">// 文件已到末尾，正常结束
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>				<span class="k">break</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="nx">dstF</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">buf</span><span class="p">)</span> <span class="c1">//每次写入5120个字节，不管实际是不是有那么多数据。数据不够会产生空字节
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>再次编译运行代码后，可以看到。如果不写 buf[:n]，那么最后就会有几个空字节多出来。
直观看起来，就是目标文件比源文件大出一点来.</p>
<h5 id="5722-大致原理">5.7.2.2 大致原理</h5>
<p>源文件总大小是 17047119 个字节，每次读取 1024<em>5 个字节，需要 3329.5 次才能把整个文件读取完整。
那么前 3329 次是没有问题的，一共能够读取到 17044480 个字节。当最后一次读取数据的时候，只剩下 2639 个有效字节了，只能读取到这 2639 个有效字节。但是写入数据的时候，它是以 buf 指定的字节量去写入数据。buf 指定的是 1024</em>5 个字节去写入，但最后只读到了 2639 个字节，而你却要写入 5120 个字节。既然你诚心诚意想要写入 5120 个字节，那么 Golang 就满足你的意愿，它很忠诚地往目标文件中写入了 5120 个字节。指定要去写入 5120 个字节，但却只有 2639 个有效字节，那么剩余的 2481 个字节只能用空字节来占位。（5120 - 2639 = 2481）
目标文件总大小是 17049600 个字节，源文件大小是 17047119 个字节，（17049600 - 17047119 = 2481）目标文件比源文件多出了 2481 个字节。</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/golang/">Golang</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/1ypylhrh/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/2y/wallhaven-2y2or6.png" loading="lazy" data-key="1ypylhrh" data-hash="https://w.wallhaven.cc/full/2y/wallhaven-2y2or6.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之并发编程</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/giabprkd/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/zy/wallhaven-zydldy.jpg" loading="lazy" data-key="giabprkd" data-hash="https://w.wallhaven.cc/full/zy/wallhaven-zydldy.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之面向对象编程</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/wknjbadw/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/zy/wallhaven-zy9gwv.png" loading="lazy" data-key="wknjbadw" data-hash="https://w.wallhaven.cc/full/zy/wallhaven-zy9gwv.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之复合类型</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/gryrnn22/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/d6/wallhaven-d6o97j.png" loading="lazy" data-key="gryrnn22" data-hash="https://w.wallhaven.cc/full/d6/wallhaven-d6o97j.png"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之函数与工程管理</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/nn24jprl/">
        
        
            <div class="article-image">
                
                    <img src="https://w.wallhaven.cc/full/kx/wallhaven-kxdz96.jpg" loading="lazy" data-key="nn24jprl" data-hash="https://w.wallhaven.cc/full/kx/wallhaven-kxdz96.jpg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Golang学习之基本类型与流程控制</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="360rce/blog-comment"
        issue-term="pathname"
        
        label="utterances"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2023 本博客所有文章除特别声明外，均采用 CC BY-SA 4.0 协议 ，转载请注明出处！
    </section>
    <i class="powerby">
    <span id="busuanzi_container_site_pv">
        访问量&nbsp;-&nbsp;<span id="busuanzi_value_site_pv"></span>
    </span>&nbsp;
    <span id="busuanzi_container_site_uv">
        访客数&nbsp;-&nbsp;<span id="busuanzi_value_site_uv"></span>人次
      </span>
    </i>


</footer>
<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('//cdn.bootcss.com/pangu/4.0.7/pangu.min.js', function() {
      pangu.spacingPage();
    });
</script>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>


    </body>
</html>
